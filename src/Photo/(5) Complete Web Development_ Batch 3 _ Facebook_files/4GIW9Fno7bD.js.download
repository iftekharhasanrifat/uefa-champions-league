if (self.CavalryLogger) { CavalryLogger.start_js(["6fjcG"]); }

__d("TWriteBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(b){b===void 0&&(b=a.DEFAULT_BYTE_BUFFER_SIZE),this.$1=new DataView(new ArrayBuffer(b)),this.$2=0}var b=a.prototype;b.write=function(a){this.$2+a.length>this.$1.byteLength&&this.$3(this.$2+a.length);for(var b=0;b<a.length;b++)this.$1.setUint8(this.$2+b,a[b]);this.$2+=a.length;return a.length};b.writeByte=function(a){this.$2+1>this.$1.byteLength&&this.$3(this.$2+1);this.$1.setUint8(this.$2,a);this.$2++;return 1};b.writeFloatBE=function(a){this.$2+Float32Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float32Array.BYTES_PER_ELEMENT);this.$1.setFloat32(this.$2,a);this.$2+=Float32Array.BYTES_PER_ELEMENT;return Float32Array.BYTES_PER_ELEMENT};b.writeDoubleBE=function(a){this.$2+Float64Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float64Array.BYTES_PER_ELEMENT);this.$1.setFloat64(this.$2,a);this.$2+=Float64Array.BYTES_PER_ELEMENT;return Float64Array.BYTES_PER_ELEMENT};b.toByteArray=function(){var a=new Uint8Array(this.$1.buffer,0,this.$2);return a};b.currentSize=function(){return this.$2};b.getUnderlyingDataView=function(){return this.$1};b.$3=function(a){a=a*2;if(!Number.isSafeInteger(a))throw new Error("unable to resize");a=new DataView(new ArrayBuffer(a));for(var b=0;b<this.$2;b++)a.setUint8(b,this.$1.getUint8(b));this.$1=a};b.readByte=function(){throw new Error("operation not supported")};b.readBytes=function(a){throw new Error("operation not supported")};b.readFloatBE=function(){throw new Error("operation not supported")};b.readDoubleBE=function(){throw new Error("operation not supported")};return a}();e.exports=a;a.DEFAULT_BYTE_BUFFER_SIZE=16}),null);
__d("StringToUtf8",["TWriteBuffer"],(function(a,b,c,d,e,f){a=function(a){var c=new(b("TWriteBuffer"))(a.length),d;for(var e=0;e<a.length;e++){d=a.charCodeAt(e);if(d<128)c.writeByte(d);else if(d<2048)c.writeByte(d>>6|192),c.writeByte(d&63|128);else if((d&64512)==55296){if(e+1>=a.length)throw new Error("UTF-16 string is truncated: ["+d.toString(16)+"]");if((a.charCodeAt(e+1)&64512)!==56320)throw new Error("Invalid UTF-16 string: ["+d.toString(16)+", "+a.charCodeAt(e+1).toString(16)+"]");d=65536+((d&1023)<<10)+(a.charCodeAt(++e)&1023);c.writeByte(d>>18|240);c.writeByte(d>>12&63|128);c.writeByte(d>>6&63|128);c.writeByte(d&63|128)}else c.writeByte(d>>12|224),c.writeByte(d>>6&63|128),c.writeByte(d&63|128)}return c.toByteArray()};f.StringToUtf8=a}),null);
__d("ThriftTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,STRUCT:12,MAP:13,SET:14,LIST:15,FLOAT:19});b=a;e.exports=b}),null);
__d("Utf8ToString",[],(function(a,b,c,d,e,f){var g=function(a,b){throw new Error(a+": ["+b.map(function(a){return a.toString(16)}).toString()+"]")},h=function(a){g("Invalid UTF-8 sequence",a)},i=function(a,b){g("Not enough bytes for "+a+"-byte sequence",b)};a=function(a){var b=0,c=[];while(b<a.length){var d=a[b++];if(d<128)c.push(String.fromCharCode(d));else if(d>=128&&d<194)h([d]);else if(d>=194&&d<224){b>=a.length&&i(2,[d]);var e=a[b++];(e&192)!==128&&h([d,e]);c.push(String.fromCharCode((d&31)<<6|e&63))}else if(d>=240&&d<245){b+2>=a.length&&i(4,[d]);e=a[b++];var f=a[b++],g=a[b++];(d==240&&(!(e>=144&&e<192)||(f&192)!==128||(g&192)!==128)||d>=241&&d<244&&((e&192)!==128||(f&192)!==128||(g&192)!==128)||d==244&&(!(e>=128&&e<144)||(f&192)!==128||(g&192)!==128))&&h([d,e,f,g]);e=((d&7)<<18|(e&63)<<12|(f&63)<<6|g&63)-65536;c.push(String.fromCharCode(55296+(e>>10)));c.push(String.fromCharCode(56320+(e&1023)))}else if(d>=245)h([d]);else{b+1>=a.length&&i(3,[d]);f=a[b++];g=a[b++];d==224?f>=160&&f<192||h([d,f,g]):d>=225&&d<237?f>=128&&f<192||h([d,f,g]):d==237?f>=128&&f<160||h([d,f,g]):d>=238&&d<240&&(f>=128&&f<192||h([d,f,g]));g>=128&&g<192||h([d,f,g]);c.push(String.fromCharCode((d&15)<<12|(f&63)<<6|g&63))}}return c.join("")};f.Utf8ToString=a}),null);
__d("jsbi",[],(function(a,b,c,d,e,f){(function(a,b){"object"==typeof f&&"undefined"!=typeof e?e.exports=b():"function"==typeof define&&define.amd?define(b):a.JSBI=b()})(this,function(){"use strict";function a(b){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a(b)}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function d(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&g(a,b)}function f(a){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},f(a)}function g(a,b){return g=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},g(a,b)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function i(){return i=h()?Reflect.construct:function(a,b,c){var d=[null];d.push.apply(d,b);b=Function.bind.apply(a,d);a=new b();return c&&g(a,c.prototype),a},i.apply(null,arguments)}function j(a){return-1!==Function.toString.call(a).indexOf("[native code]")}function k(a){var b="function"==typeof Map?new Map():void 0;return k=function(a){function c(){return i(a,arguments,f(this).constructor)}if(null===a||!j(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),g(c,a)},k(a)}function l(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function m(a,b){return b&&("object"==typeof b||"function"==typeof b)?b:l(a)}var n=function(c){var h=Math.abs,i=Math.max,j=Math.imul,k=Math.clz32;function g(a,c){if(b(this,g),a>g.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return a=m(this,f(g).call(this,a)),a.sign=c,a}return e(g,c),d(g,[{key:"toDebugString",value:function(){var a=["BigInt["],b=!0,c=!1,d=void 0;try{for(var e,e,f=this[Symbol.iterator]();!(b=(e=f.next()).done);b=!0)e=e.value,a.push((e?(e>>>0).toString(16):e)+", ")}catch(a){c=!0,d=a}finally{try{b||null==f["return"]||f["return"]()}finally{if(c)throw d}}return a.push("]"),a.join("")}},{key:"toString",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;if(2>a||36<a)throw new RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(a&a-1)?g.__toStringBasePowerOfTwo(this,a):g.__toStringGeneric(this,a,!1)}},{key:"__copy",value:function(){for(var a=new g(this.length,this.sign),b=0;b<this.length;b++)a[b]=this[b];return a}},{key:"__trim",value:function(){for(var a=this.length,b=this[a-1];0===b;)a--,b=this[a-1],this.pop();return 0===a&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var a=0;a<this.length;a++)this[a]=0}},{key:"__clzmsd",value:function(){return k(this[this.length-1])}},{key:"__inplaceMultiplyAdd",value:function(a,b,c){c>this.length&&(c=this.length);for(var d=65535&a,a=a>>>16,e=0,f=65535&b,b=b>>>16,i=0;i<c;i++){var n=this.__digit(i),m=65535&n;n=n>>>16;var o=j(m,d);m=j(m,a);var p=j(n,d);n=j(n,a);var q=f+(65535&o);o=b+e+(q>>>16)+(o>>>16)+(65535&m)+(65535&p);f=(m>>>16)+(p>>>16)+(65535&n)+(o>>>16),e=f>>>16,f&=65535,b=n>>>16;this.__setDigit(i,65535&q|o<<16)}if(0!==e||0!==f||0!==b)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(a,b,c){for(var d,e=0,f=0;f<c;f++)d=this.__halfDigit(b+f)+a.__halfDigit(f)+e,e=d>>>16,this.__setHalfDigit(b+f,d);return e}},{key:"__inplaceSub",value:function(a,b,c){var d=0;if(1&b){b>>=1;for(var e=this.__digit(b),f=65535&e,k=0;k<c-1>>>1;k++){var l=a.__digit(k),m=(e>>>16)-(65535&l)-d;d=1&m>>>16,this.__setDigit(b+k,m<<16|65535&f),e=this.__digit(b+k+1),f=(65535&e)-(l>>>16)-d,d=1&f>>>16}m=a.__digit(k);l=(e>>>16)-(65535&m)-d;d=1&l>>>16,this.__setDigit(b+k,l<<16|65535&f);if(b+k+1>=this.length)throw new RangeError("out of bounds");0==(1&c)&&(e=this.__digit(b+k+1),f=(65535&e)-(m>>>16)-d,d=1&f>>>16,this.__setDigit(b+a.length,4294901760&e|65535&f))}else{b>>=1;for(var l=0;l<a.length-1;l++){k=this.__digit(b+l);m=a.__digit(l);e=(65535&k)-(65535&m)-d;d=1&e>>>16;f=(k>>>16)-(m>>>16)-d;d=1&f>>>16,this.__setDigit(b+l,f<<16|65535&e)}k=this.__digit(b+l);m=a.__digit(l);f=(65535&k)-(65535&m)-d;d=1&f>>>16;e=0;0==(1&c)&&(e=(k>>>16)-(m>>>16)-d,d=1&e>>>16),this.__setDigit(b+l,e<<16|65535&f)}return d}},{key:"__inplaceRightShift",value:function(a){if(0!==a){for(var b,c=this.__digit(0)>>>a,d=this.length-1,e=0;e<d;e++)b=this.__digit(e+1),this.__setDigit(e,b<<32-a|c),c=b>>>a;this.__setDigit(d,c)}}},{key:"__digit",value:function(a){return this[a]}},{key:"__unsignedDigit",value:function(a){return this[a]>>>0}},{key:"__setDigit",value:function(a,b){this[a]=0|b}},{key:"__setDigitGrow",value:function(a,b){this[a]=0|b}},{key:"__halfDigitLength",value:function(){var a=this.length;return 65535>=this.__unsignedDigit(a-1)?2*a-1:2*a}},{key:"__halfDigit",value:function(a){return 65535&this[a>>>1]>>>((1&a)<<4)}},{key:"__setHalfDigit",value:function(a,b){var c=a>>>1,d=this.__digit(c);a=1&a?65535&d|b<<16:4294901760&d|65535&b;this.__setDigit(c,a)}}],[{key:"BigInt",value:function(b){var c=Math.floor,d=Number.isFinite;if("number"==typeof b){if(0===b)return g.__zero();if((0|b)===b)return 0>b?g.__oneDigit(-b,!0):g.__oneDigit(b,!1);if(!d(b)||c(b)!==b)throw new RangeError("The number "+b+" cannot be converted to BigInt because it is not an integer");return g.__fromDouble(b)}if("string"==typeof b){d=g.__fromString(b);if(null===d)throw new SyntaxError("Cannot convert "+b+" to a BigInt");return d}if("boolean"==typeof b)return!0===b?g.__oneDigit(1,!1):g.__zero();if("object"===a(b)){if(b.constructor===g)return b;c=g.__toPrimitive(b);return g.BigInt(c)}throw new TypeError("Cannot convert "+b+" to a BigInt")}},{key:"toNumber",value:function(a){var b=a.length;if(0===b)return 0;if(1===b){var c=a.__unsignedDigit(0);return a.sign?-c:c}c=a.__digit(b-1);var d=k(c),e=32*b-d;if(1024<e)return a.sign?-Infinity:1/0;e=e-1;c=c;b=b-1;d=d+1;var f=32===d?0:c<<d;f>>>=12;var h=d-12,i=12<=d?0:c<<20+d;d=20+d;0<h&&0<b&&(b--,c=a.__digit(b),f|=c>>>32-h,i=c<<h,d=h),0<d&&0<b&&(b--,c=a.__digit(b),i|=c>>>32-d,d-=32);h=g.__decideRounding(a,d,b,c);if((1===h||0===h&&1==(1&i))&&(i=i+1>>>0,0===i&&(f++,0!=f>>>20&&(f=0,e++,1023<e))))return a.sign?-Infinity:1/0;d=a.sign?-2147483648:0;return e=e+1023<<20,g.__kBitConversionInts[1]=d|e|f,g.__kBitConversionInts[0]=i,g.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(a){if(0===a.length)return a;var b=a.__copy();return b.sign=!a.sign,b}},{key:"bitwiseNot",value:function(a){return a.sign?g.__absoluteSubOne(a).__trim():g.__absoluteAddOne(a,!0)}},{key:"exponentiate",value:function(a,b){if(b.sign)throw new RangeError("Exponent must be positive");if(0===b.length)return g.__oneDigit(1,!1);if(0===a.length)return a;if(1===a.length&&1===a.__digit(0))return a.sign&&0==(1&b.__digit(0))?g.unaryMinus(a):a;if(1<b.length)throw new RangeError("BigInt too big");b=b.__unsignedDigit(0);if(1===b)return a;if(b>=g.__kMaxLengthBits)throw new RangeError("BigInt too big");if(1===a.length&&2===a.__digit(0)){var c=1+(b>>>5),d=a.sign&&0!=(1&b);d=new g(c,d);d.__initializeDigits();var e=1<<(31&b);return d.__setDigit(c-1,e),d}c=null;e=a;for(0!=(1&b)&&(c=a),b>>=1;0!==b;b>>=1)e=g.multiply(e,e),0!=(1&b)&&(null===c?c=e:c=g.multiply(c,e));return c}},{key:"multiply",value:function(a,b){if(0===a.length)return a;if(0===b.length)return b;var c=a.length+b.length;32<=a.__clzmsd()+b.__clzmsd()&&c--;c=new g(c,a.sign!==b.sign);c.__initializeDigits();for(var d=0;d<a.length;d++)g.__multiplyAccumulate(b,a.__digit(d),c,d);return c.__trim()}},{key:"divide",value:function(a,b){if(0===b.length)throw new RangeError("Division by zero");if(0>g.__absoluteCompare(a,b))return g.__zero();var c=a.sign!==b.sign,d=b.__unsignedDigit(0);if(1===b.length&&65535>=d){if(1===d)return c===a.sign?a:g.unaryMinus(a);d=g.__absoluteDivSmall(a,d,null)}else d=g.__absoluteDivLarge(a,b,!0,!1);return d.sign=c,d.__trim()}},{key:"remainder",value:function(a,b){if(0===b.length)throw new RangeError("Division by zero");if(0>g.__absoluteCompare(a,b))return a;var c=b.__unsignedDigit(0);if(1===b.length&&65535>=c){if(1===c)return g.__zero();c=g.__absoluteModSmall(a,c);return 0===c?g.__zero():g.__oneDigit(c,a.sign)}c=g.__absoluteDivLarge(a,b,!1,!0);return c.sign=a.sign,c.__trim()}},{key:"add",value:function(a,b){var c=a.sign;return c===b.sign?g.__absoluteAdd(a,b,c):0<=g.__absoluteCompare(a,b)?g.__absoluteSub(a,b,c):g.__absoluteSub(b,a,!c)}},{key:"subtract",value:function(a,b){var c=a.sign;return c===b.sign?0<=g.__absoluteCompare(a,b)?g.__absoluteSub(a,b,c):g.__absoluteSub(b,a,!c):g.__absoluteAdd(a,b,c)}},{key:"leftShift",value:function(a,b){return 0===b.length||0===a.length?a:b.sign?g.__rightShiftByAbsolute(a,b):g.__leftShiftByAbsolute(a,b)}},{key:"signedRightShift",value:function(a,b){return 0===b.length||0===a.length?a:b.sign?g.__leftShiftByAbsolute(a,b):g.__rightShiftByAbsolute(a,b)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(a,b){return 0>g.__compareToBigInt(a,b)}},{key:"lessThanOrEqual",value:function(a,b){return 0>=g.__compareToBigInt(a,b)}},{key:"greaterThan",value:function(a,b){return 0<g.__compareToBigInt(a,b)}},{key:"greaterThanOrEqual",value:function(a,b){return 0<=g.__compareToBigInt(a,b)}},{key:"equal",value:function(a,b){if(a.sign!==b.sign)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a.__digit(c)!==b.__digit(c))return!1;return!0}},{key:"notEqual",value:function(a,b){return!g.equal(a,b)}},{key:"bitwiseAnd",value:function(a,b){if(!a.sign&&!b.sign)return g.__absoluteAnd(a,b).__trim();if(a.sign&&b.sign){var c=i(a.length,b.length)+1;c=g.__absoluteSubOne(a,c);var d=g.__absoluteSubOne(b);return c=g.__absoluteOr(c,d,c),g.__absoluteAddOne(c,!0,c).__trim()}if(a.sign){d=[b,a];a=d[0],b=d[1]}return g.__absoluteAndNot(a,g.__absoluteSubOne(b)).__trim()}},{key:"bitwiseXor",value:function(a,b){if(!a.sign&&!b.sign)return g.__absoluteXor(a,b).__trim();if(a.sign&&b.sign){var c=i(a.length,b.length);c=g.__absoluteSubOne(a,c);var d=g.__absoluteSubOne(b);return g.__absoluteXor(c,d,c).__trim()}d=i(a.length,b.length)+1;if(a.sign){c=[b,a];a=c[0],b=c[1]}c=g.__absoluteSubOne(b,d);return c=g.__absoluteXor(c,a,c),g.__absoluteAddOne(c,!0,c).__trim()}},{key:"bitwiseOr",value:function(a,b){var c=i(a.length,b.length);if(!a.sign&&!b.sign)return g.__absoluteOr(a,b).__trim();if(a.sign&&b.sign){var d=g.__absoluteSubOne(a,c),e=g.__absoluteSubOne(b);return d=g.__absoluteAnd(d,e,d),g.__absoluteAddOne(d,!0,d).__trim()}if(a.sign){e=[b,a];a=e[0],b=e[1]}d=g.__absoluteSubOne(b,c);return d=g.__absoluteAndNot(d,a,d),g.__absoluteAddOne(d,!0,d).__trim()}},{key:"asIntN",value:function(a,b){if(0===b.length)return b;if(0===a)return g.__zero();if(a>=g.__kMaxLengthBits)return b;var c=a+31>>>5;if(b.length<c)return b;var d=b.__unsignedDigit(c-1),e=1<<(31&a-1);if(b.length===c&&d<e)return b;if(!((d&e)===e))return g.__truncateToNBits(a,b);if(!b.sign)return g.__truncateAndSubFromPowerOfTwo(a,b,!0);if(0==(d&e-1)){for(var f=c-2;0<=f;f--)if(0!==b.__digit(f))return g.__truncateAndSubFromPowerOfTwo(a,b,!1);return b.length===c&&d===e?b:g.__truncateToNBits(a,b)}return g.__truncateAndSubFromPowerOfTwo(a,b,!1)}},{key:"asUintN",value:function(a,b){if(0===b.length)return b;if(0===a)return g.__zero();if(b.sign){if(a>g.__kMaxLengthBits)throw new RangeError("BigInt too big");return g.__truncateAndSubFromPowerOfTwo(a,b,!1)}if(a>=g.__kMaxLengthBits)return b;var c=a+31>>>5;if(b.length<c)return b;var d=31&a;if(b.length==c){if(0==d)return b;c=b.__digit(c-1);if(0==c>>>d)return b}return g.__truncateToNBits(a,b)}},{key:"ADD",value:function(a,b){if(a=g.__toPrimitive(a),b=g.__toPrimitive(b),"string"==typeof a)return"string"!=typeof b&&(b=b.toString()),a+b;if("string"==typeof b)return a.toString()+b;if(a=g.__toNumeric(a),b=g.__toNumeric(b),g.__isBigInt(a)&&g.__isBigInt(b))return g.add(a,b);if("number"==typeof a&&"number"==typeof b)return a+b;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(a,b){return g.__compare(a,b,0)}},{key:"LE",value:function(a,b){return g.__compare(a,b,1)}},{key:"GT",value:function(a,b){return g.__compare(a,b,2)}},{key:"GE",value:function(a,b){return g.__compare(a,b,3)}},{key:"EQ",value:function(b,c){for(;;){if(g.__isBigInt(b))return g.__isBigInt(c)?g.equal(b,c):g.EQ(c,b);if("number"==typeof b){if(g.__isBigInt(c))return g.__equalToNumber(c,b);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("string"==typeof b){if(g.__isBigInt(c))return b=g.__fromString(b),null!==b&&g.equal(b,c);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("boolean"==typeof b){if(g.__isBigInt(c))return g.__equalToNumber(c,+b);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("symbol"===a(b)){if(g.__isBigInt(c))return!1;if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("object"===a(b)){if("object"===a(c)&&c.constructor!==g)return b==c;b=g.__toPrimitive(b)}else return b==c}}},{key:"NE",value:function(a,b){return!g.EQ(a,b)}},{key:"__zero",value:function(){return new g(0,!1)}},{key:"__oneDigit",value:function(a,b){b=new g(1,b);return b.__setDigit(0,a),b}},{key:"__decideRounding",value:function(a,b,c,d){if(0<b)return-1;if(0>b)b=-b-1;else{if(0===c)return-1;c--,d=a.__digit(c),b=31}b=1<<b;if(0==(d&b))return-1;if(b-=1,0!=(d&b))return 1;for(;0<c;)if(c--,0!==a.__digit(c))return 1;return 0}},{key:"__fromDouble",value:function(a){g.__kBitConversionDouble[0]=a;var b,c=2047&g.__kBitConversionInts[1]>>>20;c=c-1023;var d=(c>>>5)+1;a=new g(d,0>a);var e=1048575&g.__kBitConversionInts[1]|1048576,f=g.__kBitConversionInts[0],k=20;c=31&c;var n=0;if(c<k){var m=k-c;n=m+32,b=e>>>m,e=e<<32-m|f>>>m,f<<=32-m}else if(c===k)n=32,b=e,e=f;else{m=c-k;n=32-m,b=e<<m|f>>>32-m,e=f<<m}a.__setDigit(d-1,b);for(var c=d-2;0<=c;c--)0<n?(n-=32,b=e,e=f):b=0,a.__setDigit(c,b);return a.__trim()}},{key:"__isWhitespace",value:function(a){return!!(13>=a&&9<=a)||(159>=a?32==a:131071>=a?160==a||5760==a:196607>=a?(a&=131071,10>=a||40==a||41==a||47==a||95==a||4096==a):65279==a)}},{key:"__fromString",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=0,d=a.length,e=0;if(e===d)return g.__zero();for(var f=a.charCodeAt(e);g.__isWhitespace(f);){if(++e===d)return g.__zero();f=a.charCodeAt(e)}if(43===f){if(++e===d)return null;f=a.charCodeAt(e),c=1}else if(45===f){if(++e===d)return null;f=a.charCodeAt(e),c=-1}if(0===b){if(b=10,48===f){if(++e===d)return g.__zero();if(f=a.charCodeAt(e),88===f||120===f){if(b=16,++e===d)return null;f=a.charCodeAt(e)}else if(79===f||111===f){if(b=8,++e===d)return null;f=a.charCodeAt(e)}else if(66===f||98===f){if(b=2,++e===d)return null;f=a.charCodeAt(e)}}}else if(16===b&&48===f){if(++e===d)return g.__zero();if(f=a.charCodeAt(e),88===f||120===f){if(++e===d)return null;f=a.charCodeAt(e)}}for(;48===f;){if(++e===d)return g.__zero();f=a.charCodeAt(e)}var m=d-e,i=g.__kMaxBitsPerChar[b],j=g.__kBitsPerCharTableMultiplier-1;if(m>1073741824/i)return null;var k=i*m+j>>>g.__kBitsPerCharTableShift,l=new g(k+31>>>5,!1),n=10>b?b:10,o=10<b?b-10:0;if(0==(b&b-1)){i>>=g.__kBitsPerCharTableShift;var p=[],q=[],r=!1;do{for(var s,t=0,u=0;;){if(void 0,f-48>>>0<n)s=f-48;else if((32|f)-97>>>0<o)s=(32|f)-87;else{r=!0;break}if(u+=i,t=t<<i|s,++e===d){r=!0;break}if(f=a.charCodeAt(e),32<u+i)break}p.push(t),q.push(u)}while(!r);g.__fillFromParts(l,p,q)}else{l.__initializeDigits();var v=!1,w=0;do{for(var x,y=0,z=1;;){if(void 0,f-48>>>0<n)x=f-48;else if((32|f)-97>>>0<o)x=(32|f)-87;else{v=!0;break}var A=z*b;if(4294967295<A)break;if(z=A,y=y*b+x,w++,++e===d){v=!0;break}f=a.charCodeAt(e)}j=32*g.__kBitsPerCharTableMultiplier-1;var B=i*w+j>>>g.__kBitsPerCharTableShift+5;l.__inplaceMultiplyAdd(z,y,B)}while(!v)}if(e!==d){if(!g.__isWhitespace(f))return null;for(e++;e<d;e++)if(f=a.charCodeAt(e),!g.__isWhitespace(f))return null}return 0!==c&&10!==b?null:(l.sign=-1===c,l.__trim())}},{key:"__fillFromParts",value:function(a,b,c){for(var d=0,e=0,f=0,k=b.length-1;0<=k;k--){var l=b[k],m=c[k];e|=l<<f,f+=m,32===f?(a.__setDigit(d++,e),f=0,e=0):32<f&&(a.__setDigit(d++,e),f-=32,e=l>>>m-f)}if(0!==e){if(d>=a.length)throw new Error("implementation bug");a.__setDigit(d++,e)}for(;d<a.length;d++)a.__setDigit(d,0)}},{key:"__toStringBasePowerOfTwo",value:function(a,b){var c=a.length,d=b-1;d=(85&d>>>1)+(85&d),d=(51&d>>>2)+(51&d),d=(15&d>>>4)+(15&d);d=d;b=b-1;var e=a.__digit(c-1),f=k(e);f=0|(32*c-f+d-1)/d;if(a.sign&&f++,268435456<f)throw new Error("string too long");for(var h=Array(f),f=f-1,l=0,n=0,o=0;o<c-1;o++){var p=a.__digit(o),q=(l|p<<n)&b;h[f--]=g.__kConversionChars[q];q=d-n;for(l=p>>>q,n=32-q;n>=d;)h[f--]=g.__kConversionChars[l&b],l>>>=d,n-=d}p=(l|e<<n)&b;for(h[f--]=g.__kConversionChars[p],l=e>>>d-n;0!==l;)h[f--]=g.__kConversionChars[l&b],l>>>=d;if(a.sign&&(h[f--]="-"),-1!==f)throw new Error("implementation bug");return h.join("")}},{key:"__toStringGeneric",value:function(a,b,c){var d=a.length;if(0===d)return"";if(1===d){var e=a.__unsignedDigit(0).toString(b);return!1===c&&a.sign&&(e="-"+e),e}e=32*d-k(a.__digit(d-1));d=g.__kMaxBitsPerChar[b];d=d-1;e=e*g.__kBitsPerCharTableMultiplier;e+=d-1,e=0|e/d;var f;d=e+1>>1;e=g.exponentiate(g.__oneDigit(b,!1),g.__oneDigit(d,!1));var h=e.__unsignedDigit(0);if(1===e.length&&65535>=h){f=new g(a.length,!1),f.__initializeDigits();for(var i,j=0,l=2*a.length-1;0<=l;l--)i=j<<16|a.__halfDigit(l),f.__setHalfDigit(l,0|i/h),j=0|i%h;i=j.toString(b)}else{h=g.__absoluteDivLarge(a,e,!0,!0);f=h.quotient;l=h.remainder.__trim();i=g.__toStringGeneric(l,b,!0)}f.__trim();for(var j=g.__toStringGeneric(f,b,!0);i.length<d;)i="0"+i;return!1===c&&a.sign&&(j="-"+j),j+i}},{key:"__unequalSign",value:function(a){return a?-1:1}},{key:"__absoluteGreater",value:function(a){return a?-1:1}},{key:"__absoluteLess",value:function(a){return a?1:-1}},{key:"__compareToBigInt",value:function(a,b){var c=a.sign;if(c!==b.sign)return g.__unequalSign(c);a=g.__absoluteCompare(a,b);return 0<a?g.__absoluteGreater(c):0>a?g.__absoluteLess(c):0}},{key:"__compareToNumber",value:function(a,b){if(!0|b){var c=a.sign,d=0>b;if(c!==d)return g.__unequalSign(c);if(0===a.length){if(d)throw new Error("implementation bug");return 0===b?0:-1}if(1<a.length)return g.__absoluteGreater(c);d=h(b);var e=a.__unsignedDigit(0);return e>d?g.__absoluteGreater(c):e<d?g.__absoluteLess(c):0}return g.__compareToDouble(a,b)}},{key:"__compareToDouble",value:function(a,b){if(b!==b)return b;if(b===1/0)return-1;if(b===-Infinity)return 1;var c=a.sign;if(c!==0>b)return g.__unequalSign(c);if(0===b)throw new Error("implementation bug: should be handled elsewhere");if(0===a.length)return-1;g.__kBitConversionDouble[0]=b;b=2047&g.__kBitConversionInts[1]>>>20;if(2047==b)throw new Error("implementation bug: handled elsewhere");b=b-1023;if(0>b)return g.__absoluteGreater(c);var d=a.length,e=a.__digit(d-1),f=k(e),l=32*d-f;b=b+1;if(l<b)return g.__absoluteLess(c);if(l>b)return g.__absoluteGreater(c);b=1048576|1048575&g.__kBitConversionInts[1];var m=g.__kBitConversionInts[0],o=20;f=31-f;if(f!==(l-1)%31)throw new Error("implementation bug");var p;l=0;if(f<o){var q=o-f;l=q+32,p=b>>>q,b=b<<32-q|m>>>q,m<<=32-q}else if(f===o)l=32,p=b,b=m;else{q=f-o;l=32-q,p=b<<q|m>>>32-q,b=m<<q}if(e>>>=0,p>>>=0,e>p)return g.__absoluteGreater(c);if(e<p)return g.__absoluteLess(c);for(var f=d-2;0<=f;f--){0<l?(l-=32,p=b>>>0,b=m,m=0):p=0;o=a.__unsignedDigit(f);if(o>p)return g.__absoluteGreater(c);if(o<p)return g.__absoluteLess(c)}if(0!==b||0!==m){if(0===l)throw new Error("implementation bug");return g.__absoluteLess(c)}return 0}},{key:"__equalToNumber",value:function(a,b){return b|0===b?0===b?0===a.length:1===a.length&&a.sign===0>b&&a.__unsignedDigit(0)===h(b):0===g.__compareToDouble(a,b)}},{key:"__comparisonResultToBool",value:function(a,b){switch(b){case 0:return 0>a;case 1:return 0>=a;case 2:return 0<a;case 3:return 0<=a}throw new Error("unreachable")}},{key:"__compare",value:function(a,b,c){if(a=g.__toPrimitive(a),b=g.__toPrimitive(b),"string"==typeof a&&"string"==typeof b)switch(c){case 0:return a<b;case 1:return a<=b;case 2:return a>b;case 3:return a>=b}if(g.__isBigInt(a)&&"string"==typeof b)return b=g.__fromString(b),null!==b&&g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if("string"==typeof a&&g.__isBigInt(b))return a=g.__fromString(a),null!==a&&g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if(a=g.__toNumeric(a),b=g.__toNumeric(b),g.__isBigInt(a)){if(g.__isBigInt(b))return g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if("number"!=typeof b)throw new Error("implementation bug");return g.__comparisonResultToBool(g.__compareToNumber(a,b),c)}if("number"!=typeof a)throw new Error("implementation bug");if(g.__isBigInt(b))return g.__comparisonResultToBool(g.__compareToNumber(b,a),2^c);if("number"!=typeof b)throw new Error("implementation bug");return 0===c?a<b:1===c?a<=b:2===c?a>b:3===c?a>=b:void 0}},{key:"__absoluteAdd",value:function(a,b,c){if(a.length<b.length)return g.__absoluteAdd(b,a,c);if(0===a.length)return a;if(0===b.length)return a.sign===c?a:g.unaryMinus(a);var d=a.length;(0===a.__clzmsd()||b.length===a.length&&0===b.__clzmsd())&&d++;for(var d=new g(d,c),c=0,e=0;e<b.length;e++){var f=b.__digit(e),h=a.__digit(e),m=(65535&h)+(65535&f)+c;h=(h>>>16)+(f>>>16)+(m>>>16);c=h>>>16,d.__setDigit(e,65535&m|h<<16)}for(;e<a.length;e++){f=a.__digit(e);m=(65535&f)+c;h=(f>>>16)+(m>>>16);c=h>>>16,d.__setDigit(e,65535&m|h<<16)}return e<d.length&&d.__setDigit(e,c),d.__trim()}},{key:"__absoluteSub",value:function(a,b,c){if(0===a.length)return a;if(0===b.length)return a.sign===c?a:g.unaryMinus(a);for(var c=new g(a.length,c),d=0,e=0;e<b.length;e++){var f=a.__digit(e),l=b.__digit(e),m=(65535&f)-(65535&l)-d;d=1&m>>>16;f=(f>>>16)-(l>>>16)-d;d=1&f>>>16,c.__setDigit(e,65535&m|f<<16)}for(;e<a.length;e++){l=a.__digit(e);m=(65535&l)-d;d=1&m>>>16;f=(l>>>16)-d;d=1&f>>>16,c.__setDigit(e,65535&m|f<<16)}return c.__trim()}},{key:"__absoluteAddOne",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length;null===c?c=new g(d,b):c.sign=b;for(var e=!0,f=0;f<d;f++){var k=a.__digit(f),l=-1===k;e&&(k=0|k+1),e=l,c.__setDigit(f,k)}return e&&c.__setDigitGrow(d,1),c}},{key:"__absoluteSubOne",value:function(a,b){var c=a.length;b=b||c;for(var d=new g(b,!1),e=!0,f=0;f<c;f++){var k=a.__digit(f),l=0===k;e&&(k=0|k-1),e=l,d.__setDigit(f,k)}for(var l=c;l<b;l++)d.__setDigit(l,0);return d}},{key:"__absoluteAnd",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,e,b=m,n}var k=f;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)&b.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteAndNot",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;d<e&&(f=d);var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)&~b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteOr",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,d=e,b=m,n}var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)|b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteXor",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,d=e,b=m,n}var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)^b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteCompare",value:function(a,b){var c=a.length-b.length;if(0!=c)return c;for(var c=a.length-1;0<=c&&a.__digit(c)===b.__digit(c);)c--;return 0>c?0:a.__unsignedDigit(c)>b.__unsignedDigit(c)?1:-1}},{key:"__multiplyAccumulate",value:function(a,b,c,d){if(0!==b){for(var e=65535&b,b=b>>>16,f=0,g=0,k=0,l=0;l<a.length;l++,d++){var m=c.__digit(d),n=65535&m,o=m>>>16,p=a.__digit(l),q=65535&p;p=p>>>16;var r=j(q,e);q=j(q,b);var s=j(p,e);p=j(p,b);n+=g+(65535&r),o+=k+f+(n>>>16)+(r>>>16)+(65535&q)+(65535&s),f=o>>>16,g=(q>>>16)+(s>>>16)+(65535&p)+f,f=g>>>16,g&=65535,k=p>>>16,m=65535&n|o<<16,c.__setDigit(d,m)}for(;0!==f||0!==g||0!==k;d++){r=c.__digit(d);q=(65535&r)+g;s=(r>>>16)+(q>>>16)+k+f;g=0,k=0,f=s>>>16,r=65535&q|s<<16,c.__setDigit(d,r)}}}},{key:"__internalMultiplyAdd",value:function(a,b,c,d,e){for(var c=c,f=0,h=0;h<d;h++){var l=a.__digit(h),m=j(65535&l,b),n=(65535&m)+f+c;c=n>>>16;l=j(l>>>16,b);m=(65535&l)+(m>>>16)+c;c=m>>>16,f=l>>>16,e.__setDigit(h,m<<16|65535&n)}if(e.length>d)for(e.__setDigit(d++,c+f);d<e.length;)e.__setDigit(d++,0);else if(0!==c+f)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(a,b,c){null===c&&(c=new g(a.length,!1));for(var d=0,e=2*a.length-1;0<=e;e-=2){var f=(d<<16|a.__halfDigit(e))>>>0,k=0|f/b;d=0|f%b,f=(d<<16|a.__halfDigit(e-1))>>>0;var l=0|f/b;d=0|f%b,c.__setDigit(e>>>1,k<<16|l)}return c}},{key:"__absoluteModSmall",value:function(a,b){for(var c,d=0,e=2*a.length-1;0<=e;e--)c=(d<<16|a.__halfDigit(e))>>>0,d=0|c%b;return d}},{key:"__absoluteDivLarge",value:function(a,b,c,d){var f=b.__halfDigitLength(),e=b.length,n=a.__halfDigitLength()-f,i=null;c&&(i=new g(n+2>>>1,!1),i.__initializeDigits());var l=new g(f+2>>>1,!1);l.__initializeDigits();var m=g.__clz16(b.__halfDigit(f-1));0<m&&(b=g.__specialLeftShift(b,m,0));for(var a=g.__specialLeftShift(a,m,1),k=b.__halfDigit(f-1),o=0,n=n;0<=n;n--){var p=65535,q=a.__halfDigit(n+f);if(q!==k){q=(q<<16|a.__halfDigit(n+f-1))>>>0;p=0|q/k;for(var q=0|q%k,r=b.__halfDigit(f-2),s=a.__halfDigit(n+f-2);j(p,r)>>>0>(q<<16|s)>>>0&&(p--,q+=k,!(65535<q)););}g.__internalMultiplyAdd(b,p,0,e,l);r=a.__inplaceSub(l,n,f+1);0!==r&&(r=a.__inplaceAdd(b,n,f),a.__setHalfDigit(n+f,a.__halfDigit(n+f)+r),p--),c&&(1&n?o=p<<16:i.__setDigit(n>>>1,o|p))}return d?(a.__inplaceRightShift(m),c?{quotient:i,remainder:a}:a):c?i:void 0}},{key:"__clz16",value:function(a){return k(a)-16}},{key:"__specialLeftShift",value:function(a,b,c){var e=a.length,d=new g(e+c,!1);if(0===b){for(var f=0;f<e;f++)d.__setDigit(f,a.__digit(f));return 0<c&&d.__setDigit(e,0),d}for(var j,f=0,l=0;l<e;l++)j=a.__digit(l),d.__setDigit(l,j<<b|f),f=j>>>32-b;return 0<c&&d.__setDigit(e,f),d}},{key:"__leftShiftByAbsolute",value:function(a,b){b=g.__toShiftAmount(b);if(0>b)throw new RangeError("BigInt too big");var c=b>>>5;b=31&b;var d=a.length,e=0!==b&&0!=a.__digit(d-1)>>>32-b,f=d+c+(e?1:0),m=new g(f,a.sign);if(0===b){for(var n=0;n<c;n++)m.__setDigit(n,0);for(;n<f;n++)m.__setDigit(n,a.__digit(n-c))}else{for(var n=0,f=0;f<c;f++)m.__setDigit(f,0);for(var o,f=0;f<d;f++)o=a.__digit(f),m.__setDigit(f+c,o<<b|n),n=o>>>32-b;if(e)m.__setDigit(d+c,n);else if(0!==n)throw new Error("implementation bug")}return m.__trim()}},{key:"__rightShiftByAbsolute",value:function(a,b){var c=a.length,d=a.sign;b=g.__toShiftAmount(b);if(0>b)return g.__rightShiftByMaximum(d);var e=b>>>5;b=31&b;var f=c-e;if(0>=f)return g.__rightShiftByMaximum(d);var i=!1;if(d)if(0!=(a.__digit(e)&(1<<b)-1))i=!0;else for(var m=0;m<e;m++)if(0!==a.__digit(m)){i=!0;break}if(i&&0===b){m=a.__digit(c-1);0==~m&&f++}m=new g(f,d);if(0===b)for(var f=e;f<c;f++)m.__setDigit(f-e,a.__digit(f));else{for(var n,d=a.__digit(e)>>>b,f=c-e-1,c=0;c<f;c++)n=a.__digit(c+e+1),m.__setDigit(c,n<<32-b|d),d=n>>>b;m.__setDigit(f,d)}return i&&(m=g.__absoluteAddOne(m,!0,m)),m.__trim()}},{key:"__rightShiftByMaximum",value:function(a){return a?g.__oneDigit(1,!0):g.__zero()}},{key:"__toShiftAmount",value:function(a){if(1<a.length)return-1;a=a.__unsignedDigit(0);return a>g.__kMaxLengthBits?-1:a}},{key:"__toPrimitive",value:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";if("object"!==a(b))return b;if(b.constructor===g)return b;var d=b[Symbol.toPrimitive];if(d){var e=d(c);if("object"!==a(e))return e;throw new TypeError("Cannot convert object to primitive value")}var f=b.valueOf;if(f){var k=f.call(b);if("object"!==a(k))return k}var l=b.toString;if(l){var m=l.call(b);if("object"!==a(m))return m}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(a){return g.__isBigInt(a)?a:+a}},{key:"__isBigInt",value:function(b){return"object"===a(b)&&b.constructor===g}},{key:"__truncateToNBits",value:function(a,b){for(var c=a+31>>>5,d=new g(c,b.sign),c=c-1,e=0;e<c;e++)d.__setDigit(e,b.__digit(e));e=b.__digit(c);if(0!=(31&a)){b=32-(31&a);e=e<<b>>>b}return d.__setDigit(c,e),d.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(a,b,c){for(var d=Math.min,e=a+31>>>5,c=new g(e,c),f=0,e=e-1,h=0,d=d(e,b.length);f<d;f++){var j=b.__digit(f),l=0-(65535&j)-h;h=1&l>>>16;j=0-(j>>>16)-h;h=1&j>>>16,c.__setDigit(f,65535&l|j<<16)}for(;f<e;f++)c.__setDigit(f,0|-h);l=e<b.length?b.__digit(e):0;j=31&a;if(0===j){d=0-(65535&l)-h;h=1&d>>>16;f=0-(l>>>16)-h;b=65535&d|f<<16}else{a=32-j;l=l<<a>>>a;d=1<<32-a;f=(65535&d)-(65535&l)-h;h=1&f>>>16;j=(d>>>16)-(l>>>16)-h;b=65535&f|j<<16,b&=d-1}return c.__setDigit(e,b),c.__trim()}},{key:"__digitPow",value:function(a,b){for(var c=1;0<b;)1&b&&(c*=a),b>>>=1,a*=a;return c}}]),g}(k(Array));return n.__kMaxLength=33554432,n.__kMaxLengthBits=n.__kMaxLength<<5,n.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],n.__kBitsPerCharTableShift=5,n.__kBitsPerCharTableMultiplier=1<<n.__kBitsPerCharTableShift,n.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.__kBitConversionBuffer=new ArrayBuffer(8),n.__kBitConversionDouble=new Float64Array(n.__kBitConversionBuffer),n.__kBitConversionInts=new Int32Array(n.__kBitConversionBuffer),n})}),null);
__d("TCompactProtocolPolyfill",["StringToUtf8","ThriftTypes","Utf8ToString","jsbi"],(function(a,b,c,d,e,f){var g=Object.freeze({CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12,CT_FLOAT:13}),h=Object.freeze({NONE:-1,CT_BOOLEAN_TRUE:g.CT_BOOLEAN_TRUE,CT_BOOLEAN_FALSE:g.CT_BOOLEAN_FALSE}),i=[g.CT_STOP,0,g.CT_BOOLEAN_TRUE,g.CT_BYTE,g.CT_DOUBLE,0,g.CT_I16,0,g.CT_I32,0,g.CT_I64,g.CT_BINARY,g.CT_STRUCT,g.CT_MAP,g.CT_SET,g.CT_LIST,0,0,0,g.CT_FLOAT],j=Math.pow(2,7)-1,k=-1*Math.pow(2,7),l=Math.pow(2,15)-1,m=-1*Math.pow(2,15),n=Math.pow(2,31)-1,o=-1*Math.pow(2,31),p=Math.pow(2,32)-1,q=(a=b("jsbi")).BigInt("9223372036854775807"),r=a.BigInt("-9223372036854775808"),s=a.BigInt("18446744073709551615"),t=a.BigInt(63),u=a.BigInt(1),v=a.BigInt(0),w=a.BigInt(7),x=a.BigInt(70),y=a.BigInt(127),z=a.BigInt(128),A=Math.pow(2,4);c=function(){function a(a){this.$4=null,this.$5=null,this.$1=a,this.$2=[],this.$3=0,this.$6=new DataView(new ArrayBuffer(1))}var c=a.prototype;c.readStructBegin=function(){this.$2.push(this.$3),this.$3=0};c.readStructEnd=function(){this.$3=this.$2.pop()};c.writeStructBegin=function(a){this.$2.push(this.$3);this.$3=0;return 0};c.writeStructEnd=function(){this.$3=this.$2.pop();return 0};c.writeFieldBegin=function(a){if(a.ftype===b("ThriftTypes").BOOL){this.$4={fid:a.fid,fname:a.fname,ftype:a.ftype};return 0}else return this.$7(a,h.NONE)};c.writeListBegin=function(a){return this.$8(a)};c.writeSetBegin=function(a){return this.$8(a)};c.writeMapBegin=function(a){var b=0;if(a.size===0)b+=this.$1.writeByte(0);else{b+=this.writeVarint32(a.size);if(a.ktype!=null&&a.vtype!=null)b+=this.$1.writeByte(this.$9(a.ktype)<<4|this.$9(a.vtype));else throw new Error("received invalid map info: "+JSON.stringify(a))}return b};c.$7=function(a,b){var c=0;b=b===h.NONE?this.$9(a.ftype):b;a.fid>this.$3&&a.fid-this.$3<=A-1?c+=this.$1.writeByte(a.fid-this.$3<<4|b):(c+=this.$1.writeByte(b),c+=this.writeI16(a.fid));this.$3=a.fid;return c};c.$8=function(a){var b=0,c=this.$9(a.etype);a.size<=A-2?b+=this.$1.writeByte(a.size<<4|c):(b+=this.$1.writeByte(240|c),b+=this.writeVarint32(a.size));return b};c.readFieldBegin=function(){var a=this.$1.readByte(),c=a&15;if(c===b("ThriftTypes").STOP)return{ftype:b("ThriftTypes").STOP,fid:0};a=(a&240)>>>4;var d;a===0?d=this.readI16():d=this.$3+a;a=this.$10(c);(c===g.CT_BOOLEAN_TRUE||c===g.CT_BOOLEAN_FALSE)&&(this.$5=c===g.CT_BOOLEAN_TRUE);this.$3=d;return{ftype:a,fid:d}};c.readListBegin=function(){return this.$11()};c.readSetBegin=function(){return this.$11()};c.readMapBegin=function(){var a=this.readVarint32();if(a>0){var b=this.$1.readByte(),c=this.$12(b>>4,"readMapBegin:key");b=this.$12(b&15,"readMapBegin:value");return{ktype:this.$10(c),vtype:this.$10(b),size:a}}return{size:a}};c.$12=function(a,b){if(a<0||a>13)throw new Error(b+" read invalid compact type: "+a);return a};c.$11=function(){var a=this.$1.readByte(),b=this.$12(a&15,"_readListOrSetBegin");b=this.$10(b);a=a>>4&15;a===15&&(a=this.readVarint32());return{etype:b,size:a}};c.readFieldEnd=function(){};c.readByte=function(){this.$6.setUint8(0,this.$1.readByte());return this.$6.getInt8(0)};c.writeByte=function(a){if(a<k||a>j)throw new Error("byte to write is out of range: "+a);this.$6.setInt8(0,a);return this.$1.writeByte(this.$6.getUint8(0))};c.readFloat=function(){return this.$1.readFloatBE()};c.writeFloat=function(a){return this.$1.writeFloatBE(a)};c.readDouble=function(){return this.$1.readDoubleBE()};c.writeDouble=function(a){return this.$1.writeDoubleBE(a)};c.writeString=function(a){return this.writeBinary(b("StringToUtf8").StringToUtf8(a))};c.skip=function(a){switch(a){case b("ThriftTypes").STOP:return;case b("ThriftTypes").BOOL:this.readBool();break;case b("ThriftTypes").BYTE:this.readByte();break;case b("ThriftTypes").DOUBLE:this.readDouble();break;case b("ThriftTypes").I16:this.readI16();break;case b("ThriftTypes").I32:this.readI32();break;case b("ThriftTypes").I64:this.readI64();break;case b("ThriftTypes").STRING:this.readString();break;case b("ThriftTypes").STRUCT:this.readStructBegin();var c;while(!0){c=this.readFieldBegin();if(c.ftype===b("ThriftTypes").STOP)break;this.skip(c.ftype)}this.readStructEnd();break;case b("ThriftTypes").MAP:c=this.readMapBegin();if(c.size>0&&c.ktype!=null&&c.vtype!=null){var d=c.ktype,e=c.vtype;for(var f=0;f<c.size;f++)this.skip(d),this.skip(e)}break;case b("ThriftTypes").SET:case b("ThriftTypes").LIST:f=this.$11();for(var d=0;d<f.size;d++)this.skip(f.etype);break;case b("ThriftTypes").FLOAT:this.readFloat();break;default:throw new Error("encoutered unknow thrift type: "+a+" in skip")}};c.toByteArray=function(){return this.$1.toByteArray()};c.writeFieldStop=function(){return this.$1.writeByte(b("ThriftTypes").STOP)};c.writeI16=function(a){if(a<m||a>l)throw new Error("trying to write i16 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};c.readI16=function(){var a=this.zigzagToI32(this.readVarint32());if(a<m||a>l)throw new Error("read invalid i16: "+a);return a};c.writeI32=function(a){if(a<o||a>n)throw new Error("i32 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};c.readI32=function(){return this.zigzagToI32(this.readVarint32())};c.writeI64=function(a){return this.writeVarint64(this.i64ToZigzag(a))};c.readI64=function(){return this.zigzagToI64(this.readVarint64())};c.readBool=function(){var a;this.$5!=null?(a=this.$5,this.$5=null):a=this.$1.readByte()===g.CT_BOOLEAN_TRUE;return a};c.writeBool=function(a){var b=0;this.$4!=null?(b+=this.$7(this.$4,a?h.CT_BOOLEAN_TRUE:h.CT_BOOLEAN_FALSE),this.$4=null):b+=this.$1.writeByte(a?g.CT_BOOLEAN_TRUE:g.CT_BOOLEAN_FALSE);return b};c.readBinary=function(){var a=this.readVarint32();return a===0?new Uint8Array(0):this.$1.readBytes(a)};c.writeBinary=function(a){var b=0;b+=this.writeVarint32(a.length);b+=this.$1.write(a);return b};c.i32ToZigzag=function(a){if(a<o||a>n)throw new Error("number: "+a+" is out of range of i32");return(a<<1^(a<0?4294967295:0))>>>0};c.zigzagToI32=function(a){if(a<0||a>p)throw new Error("number: "+a+" is out of range of uint32");return a>>>1^-1*(a&1)};c.i64ToZigzag=function(a){if(b("jsbi").greaterThan(a,q)||b("jsbi").lessThan(a,r))throw new Error("i64 out of range: "+a.toString());return b("jsbi").bitwiseXor(b("jsbi").signedRightShift(a,t),b("jsbi").leftShift(a,u))};c.zigzagToI64=function(a){if(b("jsbi").lessThan(a,0)||b("jsbi").greaterThan(a,s))throw new Error("invalid uint64: "+a.toString());return b("jsbi").equal(b("jsbi").bitwiseAnd(a,u),u)?b("jsbi").bitwiseNot(b("jsbi").signedRightShift(a,u)):b("jsbi").signedRightShift(a,u)};c.writeVarint32=function(a){if(a<0||a>p)throw new Error("writeVarint32 received out of range uint32: "+a);a=a;var b=0;while(!0)if(a>>>7===0){this.$1.writeByte(a);b++;break}else this.$1.writeByte(a&127|128),b++,a>>>=7;return b};c.readVarint32=function(){var a=0,b=0,c;while(!0){c=this.$1.readByte();a=(a|(c&127)<<b)>>>0;b+=7;if((c&128)==0){if(b===35&&(c&240)!=0)throw new Error("result exceeded 32 bit limit");break}if(b>28)throw new Error("result exceeded 32 bit limit")}return a};c.writeVarint64=function(a){if(b("jsbi").lessThan(a,v)||b("jsbi").greaterThan(a,s))throw new Error("invalid uint64: "+a.toString());a=a;var c=0;while(!0)if(b("jsbi").equal(b("jsbi").signedRightShift(a,w),v)){this.$1.writeByte(b("jsbi").toNumber(a));c++;break}else{var d,e=(d=b("jsbi")).toNumber(d.bitwiseOr(d.bitwiseAnd(a,y),z));this.$1.writeByte(e);c++;a=d.signedRightShift(a,w)}return c};c.readVarint64=function(){var a=v,c=v,d;while(!0){var e;d=(e=b("jsbi")).BigInt(this.$1.readByte());a=e.bitwiseOr(a,e.leftShift(e.bitwiseAnd(d,y),c));c=e.add(c,w);if(b("jsbi").equal(b("jsbi").bitwiseAnd(d,z),v)){if(b("jsbi").equal(c,x)&&b("jsbi").notEqual(d,u))throw new Error("result exceeded 64 bit limit");break}if(b("jsbi").greaterThan(c,t))throw new Error("result exceeded 64 bit limit")}return a};c.readString=function(){return b("Utf8ToString").Utf8ToString(this.readBinary())};c.getLastFieldId=function(){return this.$3};c.getLastField=function(){return this.$2};c.getBooleanFieldInfo=function(){return this.$4};c.getBooleanValue=function(){return this.$5};c.$9=function(a){return i[a]};c.$10=function(a){switch(a){case g.CT_STOP:return b("ThriftTypes").STOP;case g.CT_BOOLEAN_FALSE:case g.CT_BOOLEAN_TRUE:return b("ThriftTypes").BOOL;case g.CT_BYTE:return b("ThriftTypes").BYTE;case g.CT_I16:return b("ThriftTypes").I16;case g.CT_I32:return b("ThriftTypes").I32;case g.CT_I64:return b("ThriftTypes").I64;case g.CT_DOUBLE:return b("ThriftTypes").DOUBLE;case g.CT_FLOAT:return b("ThriftTypes").FLOAT;case g.CT_BINARY:return b("ThriftTypes").STRING;case g.CT_LIST:return b("ThriftTypes").LIST;case g.CT_SET:return b("ThriftTypes").SET;case g.CT_MAP:return b("ThriftTypes").MAP;case g.CT_STRUCT:return b("ThriftTypes").STRUCT;default:throw new Error("don't know what type")}};return a}();e.exports=c}),null);
__d("TNoOpWriteBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(){this.$1=0}var b=a.prototype;b.write=function(a){this.$1+=a.length;return a.length};b.writeByte=function(a){this.$1++;return 1};b.writeFloatBE=function(a){this.$1+=Float32Array.BYTES_PER_ELEMENT;return Float32Array.BYTES_PER_ELEMENT};b.writeDoubleBE=function(a){this.$1+=Float64Array.BYTES_PER_ELEMENT;return Float64Array.BYTES_PER_ELEMENT};b.toByteArray=function(){throw new Error("operation not supported")};b.currentSize=function(){return this.$1};b.readByte=function(){throw new Error("operation not supported")};b.readBytes=function(a){throw new Error("operation not supported")};b.readFloatBE=function(){throw new Error("operation not supported")};b.readDoubleBE=function(){throw new Error("operation not supported")};return a}();e.exports=a}),null);
__d("TReadBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=a,this.$2=0}var b=a.prototype;b.readByte=function(){if(this.$2<this.$1.length)return this.$1[this.$2++];throw new Error("no available byte to read")};b.readBytes=function(a){if(a<0)throw new Error("cannot readBytes of negative length: "+a);if(a+this.$2>this.$1.length)throw new Error("not enough bytes to read");var b=new Uint8Array(this.$1.buffer,this.$3(),a);this.$2+=a;return b};b.readFloatBE=function(){if(Float32Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var a=new DataView(this.$1.buffer).getFloat32(this.$3());this.$2+=Float32Array.BYTES_PER_ELEMENT;return a};b.readDoubleBE=function(){if(Float64Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var a=new DataView(this.$1.buffer).getFloat64(this.$3());this.$2+=Float64Array.BYTES_PER_ELEMENT;return a};b.$3=function(){return this.$2+this.$1.byteOffset};b.getCurrentCursor=function(){return this.$2};b.writeByte=function(a){throw new Error("operation not supported")};b.write=function(a){throw new Error("operation not supported")};b.toByteArray=function(){throw new Error("operation not supported")};b.writeFloatBE=function(a){throw new Error("operation not supported")};b.writeDoubleBE=function(a){throw new Error("operation not supported")};return a}();e.exports=a}),null);
__d("CompactSerializerPolyfill",["TCompactProtocolPolyfill","TNoOpWriteBuffer","TReadBuffer","TWriteBuffer"],(function(a,b,c,d,e,f){"use strict";f.deserialize=g;f.deserializeNoThrow=a;f.serialize=h;f.serializeNoThrow=c;function g(a,c){a=new(b("TReadBuffer"))(a);a=new(b("TCompactProtocolPolyfill"))(a);return c(a)}function a(a,b,c){try{return g(a,b)}catch(a){c!=null&&c(a)}return null}function h(a,c,d){d===void 0&&(d=!1);if(d){d=new(b("TNoOpWriteBuffer"))();var e=new(b("TCompactProtocolPolyfill"))(d);c(a,e);e=new(b("TWriteBuffer"))(d.currentSize())}else e=new(b("TWriteBuffer"))();d=new(b("TCompactProtocolPolyfill"))(e);c(a,d);return d.toByteArray()}function c(a,b,c,d){c===void 0&&(c=!1);try{return h(a,b,c)}catch(a){d!=null&&d(a)}return null}}),null);
__d("DGWAuth",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";f.fromStringToDGWAuth=a;f.fromDGWAuthToString=c;var g=b("$InternalEnum")({TEST:"0:0",FACEBOOK:"1:0"});f.DGWAuth=g;function a(a){if(a==="TEST")return g.TEST;else if(a==="FACEBOOK")return g.FACEBOOK;else{a=new Error("failed to convert string ("+a+") to DGWAuth Type");a.stack;throw a}}function c(a){if(a===g.FACEBOOK)return"FACEBOOK";else return"TEST"}}),null);
__d("DgwClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1755537");c=b("FalcoLoggerInternal").create("dgw_client",a);e.exports=c}),null);
__d("DGWLoggingContext",["$InternalEnum","DgwClientFalcoEvent","FBLogger"],(function(a,b,c,d,e,f){"use strict";var g="dgw_client";f.DGW_MODULE=g;a=b("$InternalEnum")({STREAM_COMPONENT:"WebStream",ACK_MANAGER_COMPONENT:"WebStreamAckManager",CODEC_COMPONENT:"WebCodec"});f.DGWLoggingComponent=a;c=function(){function a(a,b,c,d){this.$4=a,this.$1=b,this.$3=c,this.$2=d}var c=a.prototype;c.logEvent=function(a,c,d){this.$5(a,c,null,d);a="dgwComponent: "+a+" | Event: "+c;d!=null&&(a+=" | Extra Info: "+d);b("FBLogger")(g).debug(a)};c.$5=function(a,c,d,e){var f=this,g=this.$1;g!=null&&b("DgwClientFalcoEvent").log(function(){return{event:c,logging_id:g,dgw_version:f.$4,error:d,uuid:f.$2,dgw_component:a,extra_info:e,destination_tier:f.$3}})};c.logError=function(a,c,d,e){this.$5(a,c,d,e),b("FBLogger")(g).mustfix("Error received. Event: "+c+" | Error: "+d)};c.logWarn=function(a,c,d,e){this.$5(a,c,d,e),b("FBLogger")(g).warn("Warning received. Event: "+c+" | Warning: "+d)};return a}();f.DGWLoggingContext=c}),null);
__d("DGWAckManager",["DGWLoggingContext","Promise","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g=function(){var b=a.prototype;b.stopTracking=function(a){clearTimeout(this.$1),this.$3(a)};function a(a,b,c){var d=this;this.$3=c;this.sendId=a;this.$2=b;this.handleAckReceived=function(){d.stopTracking(!0)};this.$1=setTimeout(function(){d.stopTracking(!1)},b)}return a}();a=function(){function a(a){this.$1=new Map(),this.$2=a}var c=a.prototype;c.waitForAck=function(a,c){var d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:d=this.$1;f.prev=1;f.next=4;return b("regeneratorRuntime").awrap(new(b("Promise"))(function(b,e){d.set(a,new g(a,c,b))}));case 4:e=f.sent;e===!0?this.$2.logEvent(b("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Received ACK","sendId: "+a):this.$2.logWarn(b("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ACK timeout","Request "+a+" timed out after "+c+"ms");d["delete"](a);return f.abrupt("return",e);case 10:f.prev=10;f.t0=f["catch"](1);d["delete"](a);throw f.t0;case 14:case"end":return f.stop()}},null,this,[[1,10]])};c.handleAckReceived=function(a){var c=this.$1.get(a);if(c===void 0){this.$2.logWarn(b("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"untracked ACK","Received ACK for ackId "+a+" which was not being tracked");return}c.handleAckReceived()};c.clearPendingAcks=function(){var a=this;this.$1.forEach(function(c,d,e){a.$2.logEvent(b("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending ACK with ackId "+c.sendId),c.stopTracking(!1),e["delete"](d)})};return a}();f.DGWAckManager=a}),null);
__d("DGWConstants",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";f.drainReasonToDrainReasonString=a;f.DgwCodecReturnCodeToString=c;var g=b("$InternalEnum")({DrainReason_ELB:0,DrainReason_SLB:1,DrainReason_AppServerPush:2,DrainReason_GracePeriodExpired:3,DrainReason_Unknown:4});f.DrainReason=g;function a(a){switch(a){case g.DrainReason_ELB:return"DrainReason_ELB";case g.DrainReason_SLB:return"DrainReason_SLB";case g.DrainReason_AppServerPush:return"DrainReason_AppServerPush";case g.DrainReason_GracePeriodExpired:return"DrainReason_GracePeriodExpired";case g.DrainReason_Unknown:return"DrainReason_Unknown"}}var h=b("$InternalEnum")({DgwCodecReturnCode_Success:0,DgwCodecReturnCode_Failure:1,DgwCodecReturnCode_NotEnoughData:2,DgwCodecReturnCode_OutOfMemory:3,DgwCodecReturnCode_AckIdOutOfBounds:4,DgwCodecReturnCode_InvalidParameter:5,DgwCodecReturnCode_InvalidFrameType:6,DgwCodecReturnCode_InvalidAckFrameLength:7,DgwCodecReturnCode_InvalidDrainReason:8,DgwCodecReturnCode_InvalidDataFrameLength:9,DgwCodecReturnCode_InvalidDrainFrameLength:10});f.DgwCodecReturnCode=h;function c(a){switch(a){case h.DgwCodecReturnCode_Success:return"DgwCodecReturnCode_Success";case h.DgwCodecReturnCode_Failure:return"DgwCodecReturnCode_Failure";case h.DgwCodecReturnCode_NotEnoughData:return"DgwCodecReturnCode_NotEnoughData";case h.DgwCodecReturnCode_OutOfMemory:return"DgwCodecReturnCode_OutOfMemory";case h.DgwCodecReturnCode_AckIdOutOfBounds:return"DgwCodecReturnCode_AckIdOutOfBounds";case h.DgwCodecReturnCode_InvalidParameter:return"DgwCodecReturnCode_InvalidParameter";case h.DgwCodecReturnCode_InvalidFrameType:return"DgwCodecReturnCode_InvalidFrameType";case h.DgwCodecReturnCode_InvalidAckFrameLength:return"DgwCodecReturnCode_InvalidAckFrameLength";case h.DgwCodecReturnCode_InvalidDrainReason:return"DgwCodecReturnCode_InvalidDrainReason";case h.DgwCodecReturnCode_InvalidDataFrameLength:return"DgwCodecReturnCode_InvalidDataFrameLength";case h.DgwCodecReturnCode_InvalidDrainFrameLength:return"DgwCodecReturnCode_InvalidDrainFrameLength"}}d=b("$InternalEnum")({DgwFrameType_Data:0,DgwFrameType_Ack:1,DgwFrameType_Empty:2,DgwFrameType_Drain:3,DgwFrameType_Deauth:4,DgwFrameType_EndOfData:5});f.DgwFrameType=d;e={HEADER_APPID:"x-dgw-appid",HEADER_APPVERSION:"x-dgw-appversion",HEADER_AUTHTYPE:"x-dgw-authtype",HEADER_AUTHTOKEN:"Authorization",HEADER_DGW_VERSION:"x-dgw-version",HEADER_LOGGING_ID:"x-dgw-loggingid",HEADER_REGIONHINT:"x-dgw-regionhint",HEADER_TARGET_TIER:"x-dgw-tier",HEADER_UUID:"x-dgw-uuid",kShadowHeader:"x-dgw-shadow",APPHEADER_PREFIX:"x-dgw-app-"};f.HEADER_CONSTANTS=e}),null);
__d("DGWExponentialBackoff",["Promise","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";f.callWithExponentialBackoff=a;var g={maxRetries:5,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.errors=c;return a}return a}(babelHelpers.wrapNativeSuper(Error));function a(a,c){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:c===void 0&&(c=g);d.prev=1;d.next=4;return b("regeneratorRuntime").awrap(i(a,c));case 4:return d.abrupt("return",d.sent);case 7:d.prev=7;d.t0=d["catch"](1);throw d.t0.errors[d.t0.errors.length-1];case 10:case"end":return d.stop()}},null,this,[[1,7]])}function i(a,c){var d,e,f,g,i;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:d=0,e=[],f=c.baseRetryInterval,g=c.backoffFactor;case 4:if(!(d<=c.maxRetries)){k.next=20;break}k.prev=5;k.next=8;return b("regeneratorRuntime").awrap(a());case 8:i=k.sent;return k.abrupt("return",i);case 12:k.prev=12,k.t0=k["catch"](5),e.push(k.t0);case 15:k.next=17;return b("regeneratorRuntime").awrap(j(f*Math.pow(g,d)));case 17:++d;k.next=4;break;case 20:throw new h("Max call count exceeded",e);case 21:case"end":return k.stop()}},null,this,[[5,12]])}function j(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(new(b("Promise"))(function(b){return setTimeout(b,a)}));case 2:case"end":return c.stop()}},null,this)}}),null);
__d("DGWStream",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["ABNORMAL_CLOSURE","GOING_AWAY","SERVER_INTERNAL_ERROR","UNKNOWN_ERROR"]);f.StreamError=a}),null);
__d("DGWStreamEvents",["DGWLoggingContext","FBLogger"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$3=new Map(),this.$4=new Map(),this.$5=a}var c=a.prototype;c.streamEstablished=function(){this.$5.logEvent(b("DGWLoggingContext").DGWLoggingComponent.STREAM_COMPONENT,"open"),this.$2=Date.now()};c.streamEstablishmentPending=function(){this.$1=Date.now(),this.$5.logEvent(b("DGWLoggingContext").DGWLoggingComponent.STREAM_COMPONENT,"streamPending")};c.dataSent=function(a,c,d){var e=d?"sendWithAckRequested":"sendWithoutAckRequested";this.$5.logEvent(b("DGWLoggingContext").DGWLoggingComponent.STREAM_COMPONENT,e,"sendId:"+a+", payloadSize:"+c);this.$3.set(a,{ackRequested:d,payloadSize:c,sendTimestamp:Date.now()})};c.ackReceived=function(a){b("FBLogger")(b("DGWLoggingContext").DGW_MODULE).debug("DGWStreamEvents ackReceived - sendId:"+a);a=this.$3.get(a);a!=null&&(a.ackReceivedTimestamp=Date.now())};c.ackSent=function(a){b("FBLogger")(b("DGWLoggingContext").DGW_MODULE).debug("DGWStreamEvents ackSent - ackId:"+a),this.$5.logEvent(b("DGWLoggingContext").DGWLoggingComponent.STREAM_COMPONENT,"ACK sent","ackId: "+a)};c.drainSent=function(a){b("FBLogger")(b("DGWLoggingContext").DGW_MODULE).debug("DGWStreamEvents drainSent - drainReason:"+a),this.$5.logEvent(b("DGWLoggingContext").DGWLoggingComponent.STREAM_COMPONENT,"Drain sent","drainReason: "+a)};c.dataReceived=function(a,c,d){b("FBLogger")(b("DGWLoggingContext").DGW_MODULE).debug("dataReceived - sendId:"+a+", payloadSize:"+c+", ackRequested:"+d.toString()),this.$4.set(a,{ackRequested:d,payloadSize:c,receiveTimestamp:Date.now()})};c.streamClosed=function(a,c){this.$6=Date.now();var d=this.$7();a?this.$5.logEvent(b("DGWLoggingContext").DGWLoggingComponent.STREAM_COMPONENT,"Stream closed gracefully",d):(b("FBLogger")(b("DGWLoggingContext").DGW_MODULE).debug("streamClosed with errors. DGWStreamEvents: ",d),this.$5.logError(b("DGWLoggingContext").DGWLoggingComponent.STREAM_COMPONENT,"Stream closed abnormally",c,d))};c.connectionEstablishmentFailure=function(a){this.$5.logEvent(b("DGWLoggingContext").DGWLoggingComponent.STREAM_COMPONENT,"WebSocket connection establishment failure","WebSocket close code: "+a)};c.streamEstablishmentFailure=function(a,c){this.$5.logError(b("DGWLoggingContext").DGWLoggingComponent.STREAM_COMPONENT,"Failed to establish DGW Stream","Last seen error: "+a.toString(),c)};c.error=function(a,c){var d={};d.msg=c;d.state=this.$7();this.$5.logError(b("DGWLoggingContext").DGWLoggingComponent.STREAM_COMPONENT,a,JSON.stringify(d))};c.$7=function(){var a={};a.currentNetworkCondition=window.navigator&&window.navigator.onLine==!0;a.establishRequestTimestamp=this.$1;a.establishedTimestamp=this.$2;a.streamClosedTimestamp=this.$6;a.sendHistory=JSON.stringify(Array.from(this.$3.entries()));a.receiveHistory=JSON.stringify(Array.from(this.$4.entries()));return JSON.stringify(a)};return a}();f.DGWStreamEvents=a}),null);
__d("DGWCppBridge",["Promise"],(function(g,h,i,j,k,l){var m=function(){var i=typeof document!=="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(j){j=j||{};var j=typeof j!=="undefined"?j:{},n;j.ready=new(h("Promise"))(function(g,h){n=g,h});var o={},p;for(p in j)Object.prototype.hasOwnProperty.call(j,p)&&(o[p]=j[p]);var q=[];(function(g,h){throw h});var r=!0,s=!1,t="";function u(g){return j.locateFile?j.locateFile(g,t):t+g}var v;(r||s)&&(s?t=self.location.href:document.currentScript&&(t=document.currentScript.src),i&&(t=i),t.indexOf("blob:")!==0?t=t.substr(0,t.lastIndexOf("/")+1):t="",(function(g){try{var h=new XMLHttpRequest();h.open("GET",g,!1);h.send(null);return h.responseText}catch(i){h=ea(g);if(h)return pa(h);throw i}},s&&(v=function(g){try{var h=new XMLHttpRequest();h.open("GET",g,!1);h.responseType="arraybuffer";h.send(null);return new Uint8Array(h.response)}catch(i){h=ea(g);if(h)return h;throw i}}),function(g,h,i){var j=new XMLHttpRequest();j.open("GET",g,!0);j.responseType="arraybuffer";j.onload=function(){if(j.status==200||j.status==0&&j.response){h(j.response);return}var k=ea(g);if(k){h(k.buffer);return}i()};j.onerror=i;j.send(null)}),function(g){document.title=g});var w=j.print||emptyFunction.bind(console),x=j.printErr||emptyFunction.bind(console);for(p in o)Object.prototype.hasOwnProperty.call(o,p)&&(j[p]=o[p]);o=null;j.arguments&&(q=j.arguments);j.thisProgram&&j.thisProgram;j.quit&&j.quit;var y;j.wasmBinary&&(y=j.wasmBinary);j.noExitRuntime&&j.noExitRuntime;var z={Memory:function(g){return{buffer:new ArrayBuffer(g.initial*65536),grow:function(g){g=ua(g);return g}}},Table:function(g){var h=new Array(g.initial);h.grow=function(g){h.length>=1+0&&Z("Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."),h.push(null)};h.set=function(g,i){h[g]=i};h.get=function(g){return h[g]};return h},Module:function(g){return{}},Instance:function(h,i){h=function(j,h,i){function i(h,j,i){var k=j.memory,l=new h.Int8Array(i),m=new h.Int16Array(i),n=new h.Int32Array(i),o=new h.Uint8Array(i);new h.Uint16Array(i);var p=new h.Uint32Array(i);new h.Float32Array(i);new h.Float64Array(i);var q=h.Math.imul;h.Math.fround;h.Math.abs;var r=h.Math.clz32;h.Math.min;h.Math.max;h.Math.floor;h.Math.ceil;h.Math.sqrt;j.abort;h.NaN;h.Infinity;var s=j.emscripten_memcpy_big,t=j.emscripten_resize_heap,u=5245120,v=0;function w(h,i,g,j,k,m){var r=0,s=0;r=u-80|0;u=r;n[r+72>>2]=h;n[r+68>>2]=i;n[r+64>>2]=g;n[r+60>>2]=j;n[r+56>>2]=k;n[r+52>>2]=m;a:{b:{c:{if(!n[r+72>>2]|!n[r+68>>2]|(!n[r+64>>2]|!n[r+60>>2]))break c;if(!n[r+56>>2])break c;if(n[r+52>>2])break b}n[r+76>>2]=5;break a}n[n[r+64>>2]>>2]=0;n[n[r+60>>2]>>2]=0;s=r,g=z(n[r+72>>2],n[r+68>>2],n[r+56>>2],n[r+52>>2]),n[s+48>>2]=g;if(!n[r+48>>2]){n[r+76>>2]=0;break a}s=r,g=y(q(n[r+48>>2],20)),n[s+44>>2]=g;if(!n[r+44>>2]){n[r+76>>2]=3;break a}n[r+40>>2]=n[r+44>>2];n[r+36>>2]=n[r+72>>2];n[r+32>>2]=n[r+68>>2]-n[n[r+52>>2]>>2];n[r+28>>2]=0;while(1){if(p[r+28>>2]<p[r+48>>2]){if(p[r+32>>2]<1){K(n[r+44>>2],n[r+28>>2]);n[r+76>>2]=1;break a}l[r+27|0]=o[n[r+36>>2]];n[r+36>>2]=n[r+36>>2]+1;n[r+32>>2]=n[r+32>>2]-1;d:{if(!o[r+27|0]|o[r+27|0]==1|(o[r+27|0]==2|o[r+27|0]==3))break d;if(o[r+27|0]==4)break d;if(Q(o[r+27|0])&1)break d;K(n[r+44>>2],n[r+28>>2]);n[r+76>>2]=6;break a}h=n[r+40>>2];l[h|0]=o[r+27|0]&15|o[h|0]&-16;e:{if(!(o[r+27|0]!=4?o[r+27|0]!=2:0)){h=n[r+40>>2];n[h+4>>2]=n[h+4>>2]&-16777216;n[r+40>>2]=n[r+40>>2]+20;break e}if(Q(o[r+27|0])&1){s=r,g=x(n[r+40>>2],r+36|0,r+32|0),n[s+20>>2]=g;if(!n[r+20>>2]){n[r+40>>2]=n[r+40>>2]+20;break e}K(n[r+44>>2],n[r+28>>2]);n[r+76>>2]=n[r+20>>2];break a}n[r+16>>2]=0;if(p[r+32>>2]<3){K(n[r+44>>2],n[r+28>>2]);n[r+76>>2]=1;break a}h=n[r+36>>2];i=o[h|0]|o[h+1|0]<<8;l[r+16|0]=i;l[r+17|0]=i>>>8;l[r+18|0]=o[h+2|0];n[r+36>>2]=n[r+36>>2]+3;n[r+32>>2]=n[r+32>>2]-3;if(!(n[r+16>>2]==1|o[r+27|0]!=1)){K(n[r+44>>2],n[r+28>>2]);n[r+76>>2]=7;break a}h=n[r+40>>2];n[h+4>>2]=n[r+16>>2]&16777215|n[h+4>>2]&-16777216;if(o[r+27|0]==3){if(n[r+16>>2]!=1){K(n[r+44>>2],n[r+28>>2]);n[r+76>>2]=10;break a}l[r+15|0]=0;if(p[r+32>>2]<1){E(n[r+44>>2]);n[r+76>>2]=1;break a}l[r+15|0]=o[n[r+36>>2]];n[r+36>>2]=n[r+36>>2]+1;n[r+32>>2]=n[r+32>>2]-1;f:{if(o[r+15|0]<=4){l[n[r+40>>2]+8|0]=o[r+15|0];break f}l[n[r+40>>2]+8|0]=4}n[r+40>>2]=n[r+40>>2]+20;break e}s=r,g=L(r+36|0,r+32|0,r+14|0,r+13|0),n[s+8>>2]=g;if(n[r+8>>2]){K(n[r+44>>2],n[r+28>>2]);n[r+76>>2]=n[r+8>>2];break a}if(o[r+27|0]==1){h=n[r+40>>2];l[h+8|0]=l[h+8|0]&1|o[r+13|0]<<1;n[r+40>>2]=n[r+40>>2]+20;break e}if(!o[r+27|0]){s=r,g=I(r+36|0,r+32|0,n[r+16>>2],n[r+40>>2]+12|0,n[r+40>>2]+16|0),n[s+4>>2]=g;if(n[r+4>>2]){K(n[r+44>>2],n[r+28>>2]);n[r+76>>2]=n[r+4>>2];break a}h=n[r+40>>2];l[h+8|0]=l[r+14|0]&1|o[h+8|0]&254;h=n[r+40>>2];l[h+8|0]=l[h+8|0]&1|o[r+13|0]<<1;n[r+40>>2]=n[r+40>>2]+20}}n[r+28>>2]=n[r+28>>2]+1;continue}break}if(n[r+32>>2]){K(n[r+44>>2],n[r+48>>2]);n[r+76>>2]=1;break a}n[n[r+64>>2]>>2]=n[r+44>>2];n[n[r+60>>2]>>2]=n[r+48>>2];n[r+76>>2]=0}u=r+80|0;return n[r+76>>2]}function x(g,h,i){var j=0,k=0;j=u-32|0;u=j;n[j+24>>2]=g;n[j+20>>2]=h;n[j+16>>2]=i;a:{if(!(Q(o[n[j+24>>2]]&15)&1)){n[j+28>>2]=1;break a}if(p[n[j+16>>2]>>2]<1){n[j+28>>2]=1;break a}l[n[j+24>>2]+4|0]=o[n[n[j+20>>2]>>2]];g=n[j+20>>2];n[g>>2]=n[g>>2]+1;g=n[j+16>>2];n[g>>2]=n[g>>2]+-1;if((o[n[j+24>>2]]&15)==8){g=n[j+24>>2];l[g+7|0]=0;l[g+5|0]=0;l[g+6|0]=0;n[j+28>>2]=0;break a}if(p[n[j+16>>2]>>2]<3){n[j+28>>2]=11;break a}n[j+12>>2]=0;g=n[n[j+20>>2]>>2];m[j+12>>1]=o[g|0]|o[g+1|0]<<8;l[j+14|0]=o[g+2|0];g=n[j+20>>2];n[g>>2]=n[g>>2]+3;g=n[j+16>>2];n[g>>2]=n[g>>2]+-3;g=n[j+24>>2];h=n[j+12>>2];l[g+7|0]=h>>>16;l[g+5|0]=h;l[g+6|0]=h>>>8;if(p[n[j+16>>2]>>2]<p[j+12>>2]){n[j+28>>2]=11;break a}if((o[n[j+24>>2]]&15)==5){n[n[j+24>>2]+12>>2]=n[j+12>>2];g=y(n[j+12>>2]);n[n[j+24>>2]+8>>2]=g;if(!n[n[j+24>>2]+8>>2]){n[j+28>>2]=3;break a}A(n[n[j+24>>2]+8>>2],n[n[j+20>>2]>>2],n[j+12>>2]);g=n[j+20>>2];n[g>>2]=n[j+12>>2]+n[g>>2];g=n[j+16>>2];n[g>>2]=n[g>>2]-n[j+12>>2];n[j+28>>2]=0;break a}k=j,i=L(n[j+20>>2],n[j+16>>2],j+11|0,j+10|0),n[k+4>>2]=i;if(n[j+4>>2]){n[j+28>>2]=n[j+4>>2];break a}if((o[n[j+24>>2]]&15)==7){g=n[j+24>>2];l[g+8|0]=l[g+8|0]&1|o[j+10|0]<<1;n[j+28>>2]=0;break a}if((o[n[j+24>>2]]&15)==6){k=j,i=I(n[j+20>>2],n[j+16>>2],n[j+12>>2],n[j+24>>2]+12|0,n[j+24>>2]+16|0),n[k>>2]=i;if(n[j>>2]){n[j+28>>2]=n[j>>2];break a}g=n[j+24>>2];l[g+8|0]=l[j+11|0]&1|o[g+8|0]&254;g=n[j+24>>2];l[g+8|0]=l[g+8|0]&1|o[j+10|0]<<1;n[j+28>>2]=0;break a}n[j+28>>2]=1}u=j+32|0;return n[j+28>>2]}function y(l){var m=0,g,h=0,i=0,o=0,j=0,p=0,q=0,k=0,s;p=8;a:{b:{while(1){if(p+-1&p)break b;p=p>>>0>8?p:8;h=n[515];j=h;o=n[514];q=o;l=l>>>0>8?l+3&-4:8;c:{if(l>>>0<=127){i=(l>>>3|0)+-1|0;break c}m=r(l);i=((l>>>29-m^4)-(m<<2)|0)+110|0;if(l>>>0<=4095)break c;m=((l>>>30-m^2)-(m<<1)|0)+71|0;i=m>>>0<63?m:63}m=i;g=m&31;32<=(m&63)>>>0?(m=0,g=h>>>g|0):(m=h>>>g|0,g=((1<<g)-1&h)<<32-g|q>>>g);h=m;if(m|g){while(1){j=g;o=O(g,h);m=o;g=m&31;32<=(m&63)>>>0?(m=0,j=h>>>g|0):(m=h>>>g|0,j=((1<<g)-1&h)<<32-g|j>>>g);h=m;i=i+o|0;o=i<<4;m=n[o+1032>>2];q=o+1024|0;d:{if((m|0)!=(q|0)){g=D(m,p,l);if(g)break a;g=n[m+4>>2];n[g+8>>2]=n[m+8>>2];n[n[m+8>>2]+4>>2]=g;n[m+8>>2]=q;g=o+1028|0;n[m+4>>2]=n[g>>2];n[g>>2]=m;n[n[m+4>>2]+8>>2]=m;i=i+1|0;g=(h&1)<<31|j>>>1;h=h>>>1|0;break d}m=n[515];k=2056,s=n[514]&J(i),n[k>>2]=s;n[515]=v&m;g=j^1}if(g|h)continue;break}o=n[514];j=n[515]}h=r(j);h=63-((h|0)==32?r(o)+32|0:h)<<4;m=h+1024|0;h=n[h+1032>>2];e:{if(!j&o>>>0<1073741824|j>>>0<0)break e;i=99;if((m|0)==(h|0))break e;while(1){if(!i)break e;g=D(h,p,l);if(g)break a;i=i+-1|0;h=n[h+8>>2];if((m|0)!=(h|0))continue;break}h=m}if(C(l+48|0))continue;break}if((m|0)==(h|0))break b;while(1){g=D(h,p,l);if(g)break a;h=n[h+8>>2];if((m|0)!=(h|0))continue;break}}g=0}return g}function z(h,i,g,j){var k=0;k=u-48|0;u=k;n[k+40>>2]=h;n[k+36>>2]=i;n[k+32>>2]=g;n[k+28>>2]=j;n[k+24>>2]=0;n[k+20>>2]=n[k+40>>2];a:{b:{c:{while(1){if(p[k+36>>2]<=0)break b;n[k+16>>2]=n[k+20>>2];l[k+15|0]=o[n[k+20>>2]];n[k+36>>2]=n[k+36>>2]-1;n[k+20>>2]=n[k+20>>2]+1;if(!(o[k+15|0]!=4?o[k+15|0]!=2:0)){n[k+24>>2]=n[k+24>>2]+1;continue}n[k+8>>2]=1;if(Q(o[k+15|0])&1){if(p[k+36>>2]<1){n[n[k+32>>2]>>2]=n[k+16>>2];n[n[k+28>>2]>>2]=n[k+36>>2]+n[k+8>>2];break a}n[k+36>>2]=n[k+36>>2]-1;n[k+8>>2]=n[k+8>>2]+1;n[k+20>>2]=n[k+20>>2]+1;if(o[k+15|0]==8){n[k+24>>2]=n[k+24>>2]+1;continue}}if(p[k+36>>2]<3)break c;n[k+4>>2]=0;h=k+4|0;i=n[k+20>>2];g=o[i|0]|o[i+1|0]<<8;l[h|0]=g;l[h+1|0]=g>>>8;l[h+2|0]=o[i+2|0];n[k+36>>2]=n[k+36>>2]-3;n[k+8>>2]=n[k+8>>2]+3;n[k+20>>2]=n[k+20>>2]+3;if(p[k+4>>2]<=p[k+36>>2]){n[k+24>>2]=n[k+24>>2]+1;n[k+20>>2]=n[k+4>>2]+n[k+20>>2];n[k+36>>2]=n[k+36>>2]-n[k+4>>2];continue}break}n[n[k+32>>2]>>2]=n[k+16>>2];n[n[k+28>>2]>>2]=n[k+36>>2]+n[k+8>>2];break a}n[n[k+32>>2]>>2]=n[k+16>>2];n[n[k+28>>2]>>2]=n[k+36>>2]+n[k+8>>2];break a}n[n[k+28>>2]>>2]=n[k+36>>2]}n[k+44>>2]=n[k+24>>2];u=k+48|0;return n[k+44>>2]}function A(i,j,g){var k,h;if(g>>>0>=512){s(i|0,j|0,g|0)|0;return}k=i+g|0;a:{if(!((i^j)&3)){b:{if((g|0)<1){g=i;break b}if(!(i&3)){g=i;break b}g=i;while(1){l[g|0]=o[j|0];j=j+1|0;g=g+1|0;if(g>>>0>=k>>>0)break b;if(g&3)continue;break}}i=k&-4;c:{if(i>>>0<64)break c;h=i+-64|0;if(g>>>0>h>>>0)break c;while(1){n[g>>2]=n[j>>2];n[g+4>>2]=n[j+4>>2];n[g+8>>2]=n[j+8>>2];n[g+12>>2]=n[j+12>>2];n[g+16>>2]=n[j+16>>2];n[g+20>>2]=n[j+20>>2];n[g+24>>2]=n[j+24>>2];n[g+28>>2]=n[j+28>>2];n[g+32>>2]=n[j+32>>2];n[g+36>>2]=n[j+36>>2];n[g+40>>2]=n[j+40>>2];n[g+44>>2]=n[j+44>>2];n[g+48>>2]=n[j+48>>2];n[g+52>>2]=n[j+52>>2];n[g+56>>2]=n[j+56>>2];n[g+60>>2]=n[j+60>>2];j=j- -64|0;g=g- -64|0;if(g>>>0<=h>>>0)continue;break}}if(g>>>0>=i>>>0)break a;while(1){n[g>>2]=n[j>>2];j=j+4|0;g=g+4|0;if(g>>>0<i>>>0)continue;break}break a}if(k>>>0<4){g=i;break a}h=k+-4|0;if(h>>>0<i>>>0){g=i;break a}g=i;while(1){l[g|0]=o[j|0];l[g+1|0]=o[j+1|0];l[g+2|0]=o[j+2|0];l[g+3|0]=o[j+3|0];j=j+4|0;g=g+4|0;if(g>>>0<=h>>>0)continue;break}}if(g>>>0<k>>>0)while(1){l[g|0]=o[j|0];j=j+1|0;g=g+1|0;if((k|0)!=(g|0))continue;break}}function B(i,j,g,k,m,q){var h=0,r=0;h=u-48|0;u=h;n[h+40>>2]=i;n[h+36>>2]=j;l[h+35|0]=g;l[h+34|0]=k;n[h+28>>2]=m;n[h+24>>2]=q;a:{if(!(!(l[h+35|0]&1)|o[h+34|0]<=127)){n[h+44>>2]=4;break a}b:{if(!(!n[h+40>>2]|(!n[h+28>>2]|!n[h+24>>2]))&&p[h+36>>2]<=16777215)break b;n[h+44>>2]=5;break a}n[h+20>>2]=n[h+36>>2]+5;r=h,g=y(n[h+20>>2]),n[r+16>>2]=g;if(!n[h+16>>2]){n[h+44>>2]=3;break a}n[h+12>>2]=n[h+16>>2];l[h+11|0]=0;l[n[h+12>>2]]=o[h+11|0];n[h+12>>2]=n[h+12>>2]+1;n[h+4>>2]=n[h+36>>2]+1;if(p[h+4>>2]<p[h+36>>2]){E(n[h+16>>2]);n[h+44>>2]=9;break a}i=n[h+12>>2];j=o[h+4|0]|o[h+5|0]<<8;l[i|0]=j;l[i+1|0]=j>>>8;l[i+2|0]=o[h+6|0];n[h+12>>2]=n[h+12>>2]+3;l[h+3|0]=o[h+34|0];l[h+35|0]&1&&(l[h+3|0]=o[h+3|0]|128);l[n[h+12>>2]]=o[h+3|0];n[h+12>>2]=n[h+12>>2]+1;A(n[h+12>>2],n[h+40>>2],n[h+36>>2]);n[n[h+28>>2]>>2]=n[h+16>>2];n[n[h+24>>2]>>2]=n[h+20>>2];n[h+44>>2]=0}u=h+48|0;return n[h+44>>2]}function C(k){var l,g=0,h,i,m=0,j;l=P(k);if((l|0)>=1){g=16;i=k+l|0;h=i+-16|0;n[h+12>>2]=16;n[h>>2]=16;k=n[512];a:{b:{if(!(!k|(l|0)!=n[k+8>>2])){g=n[l+-4>>2];m=l-(g>>31^g)|0;j=n[m+-4>>2];n[k+8>>2]=i;g=-16;k=m-(j>>31^j)|0;if(n[(k+n[k>>2]|0)+-4>>2]>-1)break b;l=n[k+4>>2];n[l+8>>2]=n[k+8>>2];n[n[k+8>>2]+4>>2]=l;l=h-k|0;n[k>>2]=l;break a}n[l+12>>2]=16;n[l>>2]=16;n[l+8>>2]=i;n[l+4>>2]=k;n[512]=l}k=l+g|0;l=h-k|0;n[k>>2]=l}n[((l&-4)+k|0)+-4>>2]=l^-1;m=k;g=n[k>>2]+-8|0;c:{if(g>>>0<=127){l=(g>>>3|0)+-1|0;break c}i=r(g);l=((g>>>29-i^4)-(i<<2)|0)+110|0;if(g>>>0<=4095)break c;l=((g>>>30-i^2)-(i<<1)|0)+71|0;l=l>>>0<63?l:63}h=l<<4;n[m+4>>2]=h+1024;h=h+1032|0;n[k+8>>2]=n[h>>2];n[h>>2]=k;n[n[k+8>>2]+4>>2]=k;h=n[515];k=l&31;32<=(l&63)>>>0?(l=1<<k,k=0):(l=(1<<k)-1&1>>>32-k,k=1<<k);n[514]=k|n[514];n[515]=l|h;k=1}else k=0;return k}function D(k,l,g){var h,i=0,m=0,j=0;i=k+4|0;h=(i+l|0)+-1&0-l;l=n[k>>2];if(h+g>>>0<=(l+k|0)+-4>>>0){m=n[k+4>>2];n[m+8>>2]=n[k+8>>2];n[n[k+8>>2]+4>>2]=m;(i|0)!=(h|0)&&(h=h-i|0,m=n[k+-4>>2],m=k-(m>>31^m)|0,i=h+n[m>>2]|0,n[m>>2]=i,n[(m+(i&-4)|0)+-4>>2]=i,k=k+h|0,l=l-h|0,n[k>>2]=l);a:{if(g+24>>>0<=l>>>0){i=(k+g|0)+8|0;l=l-g|0;h=l+-8|0;n[i>>2]=h;n[(i+(h&-4)|0)+-4>>2]=7-l;j=i;m=n[i>>2]+-8|0;b:{if(m>>>0<=127){h=(m>>>3|0)+-1|0;break b}l=r(m);h=((m>>>29-l^4)-(l<<2)|0)+110|0;if(m>>>0<=4095)break b;l=((m>>>30-l^2)-(l<<1)|0)+71|0;h=l>>>0<63?l:63}l=h;h=l<<4;n[j+4>>2]=h+1024;h=h+1032|0;n[i+8>>2]=n[h>>2];n[h>>2]=i;n[n[i+8>>2]+4>>2]=i;h=n[515];i=l&31;32<=(l&63)>>>0?(l=1<<i,j=0):(l=(1<<i)-1&1>>>32-i,j=1<<i);n[514]=j|n[514];n[515]=l|h;l=g+8|0;n[k>>2]=l;n[((l&-4)+k|0)+-4>>2]=l;break a}n[(k+l|0)+-4>>2]=l}k=k+4|0}else k=0;return k}function E(j){var k=0,g,h=0,i,l=0;if(j){g=j+-4|0;i=n[g>>2];h=i;k=g;l=n[j+-8>>2];(l|0)<=-1&&(j=g+l|0,k=n[j+5>>2],n[k+8>>2]=n[j+9>>2],n[n[j+9>>2]+4>>2]=k,h=i+(l^-1)|0,k=j+1|0);j=g+i|0;g=n[j>>2];(g|0)!=n[(j+g|0)+-4>>2]&&(i=n[j+4>>2],n[i+8>>2]=n[j+8>>2],n[n[j+8>>2]+4>>2]=i,h=g+h|0);n[k>>2]=h;n[((h&-4)+k|0)+-4>>2]=h^-1;l=k;h=n[k>>2]+-8|0;a:{if(h>>>0<=127){j=(h>>>3|0)+-1|0;break a}i=r(h);j=((h>>>29-i^4)-(i<<2)|0)+110|0;if(h>>>0<=4095)break a;j=((h>>>30-i^2)-(i<<1)|0)+71|0;j=j>>>0<63?j:63}g=j<<4;n[l+4>>2]=g+1024;g=g+1032|0;n[k+8>>2]=n[g>>2];n[g>>2]=k;n[n[k+8>>2]+4>>2]=k;g=n[515];k=j&31;32<=(j&63)>>>0?(j=1<<k,k=0):(j=(1<<k)-1&1>>>32-k,k=1<<k);n[514]=k|n[514];n[515]=j|g}}function G(h,i,g){var j=0,k=0;j=u-48|0;u=j;n[j+40>>2]=h;n[j+36>>2]=i;n[j+32>>2]=g;a:{if(!(n[j+32>>2]?n[j+36>>2]:0)){n[j+44>>2]=5;break a}if(p[j+40>>2]>4){n[j+44>>2]=8;break a}n[j+28>>2]=5;k=j,g=y(n[j+28>>2]),n[k+24>>2]=g;if(!n[j+24>>2]){n[j+44>>2]=3;break a}n[j+20>>2]=n[j+24>>2];l[j+19|0]=3;l[n[j+20>>2]]=o[j+19|0];n[j+20>>2]=n[j+20>>2]+1;n[j+12>>2]=1;h=n[j+20>>2];i=o[j+12|0]|o[j+13|0]<<8;l[h|0]=i;l[h+1|0]=i>>>8;l[h+2|0]=o[j+14|0];n[j+20>>2]=n[j+20>>2]+3;l[j+11|0]=n[j+40>>2];l[n[j+20>>2]]=o[j+11|0];n[n[j+36>>2]>>2]=n[j+24>>2];n[n[j+32>>2]>>2]=n[j+28>>2];n[j+44>>2]=0}u=j+48|0;return n[j+44>>2]}function H(i,j,g){var k=0,h=0;k=u-48|0;u=k;l[k+43|0]=i;n[k+36>>2]=j;n[k+32>>2]=g;a:{if(o[k+43|0]>127){n[k+44>>2]=4;break a}if(!(n[k+32>>2]?n[k+36>>2]:0)){n[k+44>>2]=5;break a}n[k+28>>2]=5;h=k,g=y(n[k+28>>2]),n[h+24>>2]=g;if(!n[k+24>>2]){n[k+44>>2]=3;break a}n[k+20>>2]=n[k+24>>2];l[k+19|0]=1;l[n[k+20>>2]]=o[k+19|0];n[k+20>>2]=n[k+20>>2]+1;n[k+12>>2]=1;i=n[k+20>>2];j=o[k+12|0]|o[k+13|0]<<8;l[i|0]=j;l[i+1|0]=j>>>8;l[i+2|0]=o[k+14|0];n[k+20>>2]=n[k+20>>2]+3;l[n[k+20>>2]]=o[k+43|0];n[n[k+36>>2]>>2]=n[k+24>>2];n[n[k+32>>2]>>2]=n[k+28>>2];n[k+44>>2]=0}u=k+48|0;return n[k+44>>2]}function I(j,k,g,h,i){var l=0;l=u-32|0;u=l;n[l+24>>2]=j;n[l+20>>2]=k;n[l+16>>2]=g;n[l+12>>2]=h;n[l+8>>2]=i;a:{if(p[l+16>>2]<1){n[l+28>>2]=9;break a}n[n[l+8>>2]>>2]=n[l+16>>2]-1;if(p[n[l+20>>2]>>2]<p[n[l+8>>2]>>2]){n[l+28>>2]=1;break a}j=y(n[n[l+8>>2]>>2]);n[n[l+12>>2]>>2]=j;if(!n[n[l+12>>2]>>2]){n[l+28>>2]=3;break a}A(n[n[l+12>>2]>>2],n[n[l+24>>2]>>2],n[n[l+8>>2]>>2]);j=n[l+24>>2];n[j>>2]=n[n[l+8>>2]>>2]+n[j>>2];j=n[l+20>>2];n[j>>2]=n[j>>2]-n[n[l+8>>2]>>2];n[l+28>>2]=0}u=l+32|0;return n[l+28>>2]}function J(k){var l,g,h,i,j,m;h=k&63;l=h;g=l&31;32<=l>>>0?(l=0,j=-1>>>g|0):(l=-1>>>g|0,j=(1<<g)-1<<32-g|-1>>>g);g=j&-2;i=h&31;32<=h>>>0?(l=g<<i,j=0):(l=(1<<i)-1&g>>>32-i|l<<i,j=g<<i);g=l;m=0-k&63;l=m;k=l&31;32<=l>>>0?(l=-1<<k,k=0):(l=(1<<k)-1&-1>>>32-k|-1<<k,k=-1<<k);i=k&-2;h=m&31;32<=m>>>0?(k=0,l=l>>>h|0):(k=l>>>h|0,l=((1<<h)-1&l)<<32-h|i>>>h);l=l|j;v=k|g;return l}function K(h,i){var g=0;g=u-16|0;u=g;n[g+12>>2]=h;n[g+8>>2]=i;n[g+4>>2]=0;while(1){if(p[g+4>>2]<p[g+8>>2]){n[g>>2]=n[g+12>>2]+q(n[g+4>>2],20);a:{if(!(o[n[g>>2]]&15)){E(n[n[g>>2]+12>>2]);break a}b:{if((o[n[g>>2]]&15)==5){E(n[n[g>>2]+8>>2]);break b}(o[n[g>>2]]&15)==6&&E(n[n[g>>2]+12>>2])}}n[g+4>>2]=n[g+4>>2]+1;continue}break}E(n[g+12>>2]);u=g+16|0}function L(h,i,g,j){var k;k=u-32|0;n[k+24>>2]=h;n[k+20>>2]=i;n[k+16>>2]=g;n[k+12>>2]=j;l[k+11|0]=0;a:{if(p[n[k+20>>2]>>2]<1){n[k+28>>2]=1;break a}l[k+11|0]=o[n[n[k+24>>2]>>2]];h=n[k+24>>2];n[h>>2]=n[h>>2]+1;h=n[k+20>>2];n[h>>2]=n[h>>2]-1;l[n[k+16>>2]]=(o[k+11|0]&128)==128;l[n[k+12>>2]]=o[k+11|0]&127;n[k+28>>2]=0}return n[k+28>>2]}function M(h,i){var g=0,j=0;g=u-32|0;u=g;n[g+24>>2]=h;n[g+20>>2]=i;j=g,h=y(1),n[j+16>>2]=h;a:{if(!n[g+16>>2]){n[g+28>>2]=3;break a}l[g+15|0]=2;l[n[g+16>>2]]=o[g+15|0];n[n[g+24>>2]>>2]=n[g+16>>2];n[n[g+20>>2]>>2]=1;n[g+28>>2]=0}u=g+32|0;return n[g+28>>2]}function N(h,i){var g=0,j=0;g=u-32|0;u=g;n[g+24>>2]=h;n[g+20>>2]=i;j=g,h=y(1),n[j+16>>2]=h;a:{if(!n[g+16>>2]){n[g+28>>2]=3;break a}l[g+15|0]=4;l[n[g+16>>2]]=o[g+15|0];n[n[g+24>>2]>>2]=n[g+16>>2];n[n[g+20>>2]>>2]=1;n[g+28>>2]=0}u=g+32|0;return n[g+28>>2]}function O(i,j){var g=0,h=0;if(i|j){h=j+-1|0;g=i+-1|0;g>>>0<4294967295&&(h=h+1|0);g=r(i^g)+32|0;i=r(j^h);i=(i|0)==32?g:i;j=63-i|0;v=0-(63<i>>>0)|0;return j}v=0;return 64}function P(h){var i=0,g;i=n[520];g=h+3&-4;h=i+g|0;a:{if(h>>>0<=i>>>0?(g|0)>=1:0)break a;if(h>>>0>da()<<16>>>0&&!t(h|0))break a;n[520]=h;return i}n[516]=48;return-1}function Q(g){var h;h=u-16|0;l[h+15|0]=g;g=1;a:{if(o[h+15|0]==5)break a;g=1;if(o[h+15|0]==6)break a;g=1;if(o[h+15|0]==7)break a;g=o[h+15|0]==8}return g}function R(){var h=0,i,g;while(1){i=h<<4;g=i+1024|0;n[i+1028>>2]=g;n[i+1032>>2]=g;h=h+1|0;if((h|0)!=64)continue;break}C(48)}function S(k,l,g,h,i,j){k=k|0;l=l|0;g=g|0;h=h|0;i=i|0;j=j|0;return B(k,l,g,h,i,j)|0}function T(k,l,g,h,i,j){k=k|0;l=l|0;g=g|0;h=h|0;i=i|0;j=j|0;return w(k,l,g,h,i,j)|0}function U(h,i,g){h=h|0;i=i|0;g=g|0;return H(h,i,g)|0}function ga(h,i,g){h=h|0;i=i|0;g=g|0;return G(h,i,g)|0}function V(g,h){g=g|0;h=h|0;return q(h,20)+g|0}function W(g,h){g=g|0;h=h|0;return M(g,h)|0}function X(g,h){g=g|0;h=h|0;return N(g,h)|0}function Y(g){g=g|0;return o[g+8|0]>>>1|0}function ha(g){g=g|0;return l[g+8|0]&1}function Z(g){g=g|0;return n[g+12>>2]}function ia(g){g=g|0;return n[g+16>>2]}function $(g){g=g|0;return o[g+8|0]}function aa(g){g=g|0;return o[g|0]&15}function ba(g){g=g|0;return la(g|0)|0}function ca(g){g=g|0;return y(g)|0}function ja(g){g=g|0,E(g)}function ka(){R()}function da(){return i.byteLength/65536|0}function la(g){g=g|0;var j=da()|0;g=j+g|0;if(j<g&&g<65536){g=new ArrayBuffer(q(g,65536));var r=new h.Int8Array(g);r.set(l);l=r;l=new h.Int8Array(g);m=new h.Int16Array(g);n=new h.Int32Array(g);o=new h.Uint8Array(g);new h.Uint16Array(g);p=new h.Uint32Array(g);new h.Float32Array(g);new h.Float64Array(g);i=g;k.buffer=g}return j}return{__wasm_call_ctors:ka,_malloc:ca,_free:ja,_DgwCodecEncodeEmpty:W,_DgwCodecEncodeDirectStream_Ack:U,_DgwCodecEncodeDeauth:X,_DgwCodecEncodeDrain:ga,_DgwCodecEncodeDirectStream_Data:S,_DgwCodecDecode:T,_getFrameType:aa,_getAckIdFromAckFrame:Y,_getAckIdFromDataFrame:Y,_getRequiresAckFromDataFrame:ha,_getDataFromDataFrame:Z,_getDataSizeFromDataFrame:ia,_getDrainReasonFromDrainFrame:$,_getDGWFramePtr:V,__growWasmMemory:ba}}return i({Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:Infinity,Math:Math},j,h.buffer)}(sa,A,B);return{exports:h}},instantiate:function(g,h){return{then:function(h){h({instance:new z.Instance(new z.Module(g))})}}},RuntimeError:Error};y=[];typeof z!=="object"&&x("no native wasm support detected");var A,B=new z.Table({initial:1,maximum:1+0,element:"anyfunc"}),C=!1;function D(g,h){g||Z("Assertion failed: "+h)}p=65536;function E(g,h){g%h>0&&(g+=h-g%h);return g}var F,G,H;function I(g){F=g,j.HEAP8=new Int8Array(g),j.HEAP16=new Int16Array(g),j.HEAP32=H=new Int32Array(g),j.HEAPU8=G=new Uint8Array(g),j.HEAPU16=new Uint16Array(g),j.HEAPU32=new Uint32Array(g),j.HEAPF32=new Float32Array(g),j.HEAPF64=new Float64Array(g)}o=5245120;var J=2080,K=j.INITIAL_MEMORY||8388608;j.wasmMemory?A=j.wasmMemory:A=new z.Memory({initial:K/p,maximum:2147483648/p});A&&(F=A.buffer);F.byteLength;I(F);H[J>>2]=o;function L(g){while(g.length>0){var h=g.shift();if(typeof h=="function"){h(j);continue}var i=h.func;typeof i==="number"?h.arg===void 0?j.dynCall_v(i):j.dynCall_vi(i,h.arg):i(h.arg===void 0?null:h.arg)}}var M=[],N=[],O=[],P=[];function Q(){if(j.preRun){typeof j.preRun=="function"&&(j.preRun=[j.preRun]);while(j.preRun.length)U(j.preRun.shift())}L(M)}function R(){L(N)}function S(){L(O)}function T(){if(j.postRun){typeof j.postRun=="function"&&(j.postRun=[j.postRun]);while(j.postRun.length)ga(j.postRun.shift())}L(P)}function U(g){M.unshift(g)}function ga(g){P.unshift(g)}var V=0,W=null,X=null;function Y(g){V++,j.monitorRunDependencies&&j.monitorRunDependencies(V)}function ha(g){V--;j.monitorRunDependencies&&j.monitorRunDependencies(V);if(V==0){W!==null&&(clearInterval(W),W=null);if(X){g=X;X=null;g()}}}j.preloadedImages={};j.preloadedAudios={};function Z(g){j.onAbort&&j.onAbort(g);g+="";w(g);x(g);C=!0;g="abort("+g+"). Build with -s ASSERTIONS=1 for more info.";throw new z.RuntimeError(g)}function ia(g,h){return String.prototype.startsWith?g.startsWith(h):g.indexOf(h)===0}var $="data:application/octet-stream;base64,";function aa(g){return ia(g,$)}var ba="dgwcppbridge.wasm";aa(ba)||(ba=u(ba));function ca(){try{if(y)return new Uint8Array(y);var g=ea(ba);if(g)return g;if(v)return v(ba);else throw"both async and sync fetching of the wasm failed"}catch(g){Z(g)}}function ja(){return!y&&(r||s)&&typeof fetch==="function"?fetch(ba,{credentials:"same-origin"}).then(function(g){if(!g.ok)throw"failed to load wasm binary file at '"+ba+"'";return g.arrayBuffer()})["catch"](function(){return ca()}):new(h("Promise"))(function(g,h){g(ca())})}function ka(){var h={env:sa,wasi_snapshot_preview1:sa};function i(h,g){g=h.exports;j.asm=g;ha("wasm-instantiate")}Y("wasm-instantiate");function m(g){i(g.instance)}function n(g){return ja().then(function(g){return z.instantiate(g,h)}).then(g,function(g){x("failed to asynchronously prepare wasm: "+g),Z(g)})}function o(){if(!y&&typeof z.instantiateStreaming==="function"&&!aa(ba)&&typeof fetch==="function")fetch(ba,{credentials:"same-origin"}).then(function(g){g=z.instantiateStreaming(g,h);return g.then(m,function(g){x("wasm streaming compile failed: "+g);x("falling back to ArrayBuffer instantiation");return n(m)})});else return n(m)}if(j.instantiateWasm)try{var g=j.instantiateWasm(h,i);return g}catch(g){x("Module.instantiateWasm callback failed with error: "+g);return!1}o();return{}}N.push({func:function(){ta()}});function da(g,h,i){G.copyWithin(g,h,h+i)}function la(){return G.length}function ma(g){try{A.grow(g-F.byteLength+65535>>>16);I(A.buffer);return 1}catch(g){}}function na(g){g=g>>>0;var h=la(),i=65536,j=2147483648;if(g>j)return!1;var k=16777216;for(var l=1;l<=4;l*=2){var m=h*(1+.2/l);m=Math.min(m,g+100663296);m=Math.min(j,E(Math.max(k,g,m),i));m=ma(m);if(m)return!0}return!1}var oa=!1;function pa(g){var h=[];for(var i=0;i<g.length;i++){var j=g[i];j>255&&(oa&&D(!1,"Character code "+j+" ("+String.fromCharCode(j)+")  at offset "+i+" not in 0x00-0xFF."),j&=255);h.push(String.fromCharCode(j))}return h.join("")}var qa=typeof atob==="function"?atob:function(g){var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",j,k,l,m,n,o=0;g=g.replace(/[^A-Za-z0-9\+\/\=]/g,"");do k=h.indexOf(g.charAt(o++)),l=h.indexOf(g.charAt(o++)),m=h.indexOf(g.charAt(o++)),n=h.indexOf(g.charAt(o++)),k=k<<2|l>>4,l=(l&15)<<4|m>>2,j=(m&3)<<6|n,i=i+String.fromCharCode(k),m!==64&&(i=i+String.fromCharCode(l)),n!==64&&(i=i+String.fromCharCode(j));while(o<g.length);return i};function ra(g){try{g=qa(g);var h=new Uint8Array(g.length);for(var i=0;i<g.length;++i)h[i]=g.charCodeAt(i);return h}catch(g){throw new Error("Converting base64 string to bytes failed.")}}function ea(g){if(!aa(g))return;return ra(g.slice($.length))}var sa={emscripten_memcpy_big:da,emscripten_resize_heap:na,memory:A,table:B};K=ka();j.asm=K;var ta=j.___wasm_call_ctors=function(){return(ta=j.___wasm_call_ctors=j.asm.__wasm_call_ctors).apply(null,arguments)};j.__malloc=function(){return(j.__malloc=j.asm._malloc).apply(null,arguments)};j.__free=function(){return(j.__free=j.asm._free).apply(null,arguments)};j.__DgwCodecEncodeEmpty=function(){return(j.__DgwCodecEncodeEmpty=j.asm._DgwCodecEncodeEmpty).apply(null,arguments)};j.__DgwCodecEncodeDirectStream_Ack=function(){return(j.__DgwCodecEncodeDirectStream_Ack=j.asm._DgwCodecEncodeDirectStream_Ack).apply(null,arguments)};j.__DgwCodecEncodeDeauth=function(){return(j.__DgwCodecEncodeDeauth=j.asm._DgwCodecEncodeDeauth).apply(null,arguments)};j.__DgwCodecEncodeDrain=function(){return(j.__DgwCodecEncodeDrain=j.asm._DgwCodecEncodeDrain).apply(null,arguments)};j.__DgwCodecEncodeDirectStream_Data=function(){return(j.__DgwCodecEncodeDirectStream_Data=j.asm._DgwCodecEncodeDirectStream_Data).apply(null,arguments)};j.__DgwCodecDecode=function(){return(j.__DgwCodecDecode=j.asm._DgwCodecDecode).apply(null,arguments)};j.__getFrameType=function(){return(j.__getFrameType=j.asm._getFrameType).apply(null,arguments)};j.__getAckIdFromAckFrame=function(){return(j.__getAckIdFromAckFrame=j.asm._getAckIdFromAckFrame).apply(null,arguments)};j.__getAckIdFromDataFrame=function(){return(j.__getAckIdFromDataFrame=j.asm._getAckIdFromDataFrame).apply(null,arguments)};j.__getRequiresAckFromDataFrame=function(){return(j.__getRequiresAckFromDataFrame=j.asm._getRequiresAckFromDataFrame).apply(null,arguments)};j.__getDataFromDataFrame=function(){return(j.__getDataFromDataFrame=j.asm._getDataFromDataFrame).apply(null,arguments)};j.__getDataSizeFromDataFrame=function(){return(j.__getDataSizeFromDataFrame=j.asm._getDataSizeFromDataFrame).apply(null,arguments)};j.__getDrainReasonFromDrainFrame=function(){return(j.__getDrainReasonFromDrainFrame=j.asm._getDrainReasonFromDrainFrame).apply(null,arguments)};j.__getDGWFramePtr=function(){return(j.__getDGWFramePtr=j.asm._getDGWFramePtr).apply(null,arguments)};var ua=j.__growWasmMemory=function(){return(ua=j.__growWasmMemory=j.asm.__growWasmMemory).apply(null,arguments)};j.asm=K;var fa;X=function g(){fa||va(),fa||(X=g)};function va(g){g||q;if(V>0)return;Q();if(V>0)return;function h(){if(fa)return;fa=!0;j.calledRun=!0;if(C)return;R();S();n(j);j.onRuntimeInitialized&&j.onRuntimeInitialized();T()}j.setStatus?(j.setStatus("Running..."),setTimeout(function(){setTimeout(function(){j.setStatus("")},1),h()},1)):h()}j.run=va;if(j.preInit){typeof j.preInit=="function"&&(j.preInit=[j.preInit]);while(j.preInit.length>0)j.preInit.pop()()}va();return j.ready}}();typeof l==="object"&&typeof k==="object"?k.exports=m:typeof define==="function"&&define.amd?define([],function(){return m}):typeof l==="object"&&(l.Module=m)}),null);
__d("DGWUtils",["DGWConstants","DGWCppBridge","DGWLoggingContext","Random","URI","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";f.uuidv4=a;var g,h=4;function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=b("Random").random()*16|0;a=a=="x"?c:c&3|8;return a.toString(16)})}var i=null;c=function(){function a(){}a.initialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:if(!(i!=null)){a.next=2;break}return a.abrupt("return");case 2:a.next=4;return b("regeneratorRuntime").awrap(b("DGWCppBridge")());case 4:i=a.sent;case 5:case"end":return a.stop()}},null,this)};a.constructConnectUrl=function(a){var c,d,e=a.appId,f=a.appVersion,h=a.authType,i=a.dgwVersion,j=a.fbId,k=a.tier,l=a.loggingId,m=a.headers,n=a.endpoint,o=a.serviceId;a=a.regionHint;var p=(c={},c[(d=b("DGWConstants")).HEADER_CONSTANTS.HEADER_APPID]=e,c[d.HEADER_CONSTANTS.HEADER_APPVERSION]=f,c[d.HEADER_CONSTANTS.HEADER_AUTHTYPE]=h,c[d.HEADER_CONSTANTS.HEADER_DGW_VERSION]=i,c[d.HEADER_CONSTANTS.HEADER_UUID]=j,c[d.HEADER_CONSTANTS.HEADER_TARGET_TIER]=k,c);l!==void 0&&(p[b("DGWConstants").HEADER_CONSTANTS.HEADER_LOGGING_ID]=l);a!==void 0&&(p[b("DGWConstants").HEADER_CONSTANTS.HEADER_REGIONHINT]=a);Object.keys(m).forEach(function(a){var c=b("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+a;Object.prototype.hasOwnProperty.call(p,c)||(p[c]=m[a])});e=new(g||(g=b("URI")))(n);e.setQueryData(p);e.setPath(e.getPath()+"/"+o);return e.toString()};return a}();f.DGWUtils=c;d=function(){function a(a,b){this.$1=null,this.$2=a,this.$3=b}a.initialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:if(!(i!=null)){a.next=2;break}return a.abrupt("return");case 2:a.next=4;return b("regeneratorRuntime").awrap(b("DGWCppBridge")());case 4:i=a.sent;case 5:case"end":return a.stop()}},null,this)};var c=a.prototype;c.malloc=function(a){return i.__malloc(a)};c.free=function(a){i.__free(a)};c.append=function(a){if(this.$1==null){this.$1=a;return}var b=this.$1.length,c=new Uint8Array(b+a.length);c.set(this.$1,0);c.set(a,b);this.$1=c};c.processData=function(){if(this.$1==null)return;var a=this.$1.length,c=this.malloc(a),d=i.HEAPU8.subarray(c,c+a);if(this.$1)for(var e=0;e<d.length;++e)d[e]=this.$1[e];e=this.malloc(h*4);if(e==0){(d=this.$2)==null?void 0:d.logError(b("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Codec memory allocation failure","Could not allocate memory with malloc");return}d=e;var f=d+h,g=f+h,j=g+h;a=i.__DgwCodecDecode(c,a,d,f,g,j);this.free(c);if(a!==b("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){this.free(e);(g=this.$2)==null?void 0:g.logError(b("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Codec Decode Failure","Failed to decode Frame(s). Received error code "+b("DGWConstants").DgwCodecReturnCodeToString(a));return}c=i.HEAPU32.subarray(j/h,j/h+1)[0];if(this.$1==null){this.free(e);return}g=this.$1.length-c;this.$1&&this.$1.length>g?this.$1=new Uint8Array(this.$1.slice(g)):this.$1=null;a=i.HEAPU32.subarray(f/h,f/h+1)[0];j=i.HEAPU32.subarray(d/h,d/h+1)[0];for(var c=0;c<a;++c){g=i.__getDGWFramePtr(j,c);f=i.__getFrameType(g);switch(f){case b("DGWConstants").DgwFrameType.DgwFrameType_Ack:(d=this.$2)==null?void 0:d.logEvent(b("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received ACK Frame from server");(f=this.$3)==null?void 0:f.handleAckReceived(i.__getAckIdFromAckFrame(g));break;case b("DGWConstants").DgwFrameType.DgwFrameType_Data:(d=this.$2)==null?void 0:d.logEvent(b("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received Data Frame from server");f=i.__getDataFromDataFrame(g);d=i.HEAPU8.subarray(f,f+i.__getDataSizeFromDataFrame(g));(f=this.$3)==null?void 0:f.onDataReceived(Uint8Array.from(d),i.__getRequiresAckFromDataFrame(g)?i.__getAckIdFromDataFrame(g):null);break;case b("DGWConstants").DgwFrameType.DgwFrameType_Drain:f=i.__getDrainReasonFromDrainFrame(g);d=b("DGWConstants").drainReasonToDrainReasonString(f);(f=this.$2)==null?void 0:f.logEvent(b("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received Drain Frame from server","DrainReason: "+d);(f=this.$3)==null?void 0:f.receivedDrainSignal(d);break;default:break}this.free(g)}this.free(e)};c.encodeData=function(a,c,d){var e=this.malloc(a.length),f=i.HEAPU8.subarray(e,e+a.length);for(var g=0;g<f.length;++g)f[g]=a[g];a=this.malloc(h*2);g=a;var j=a+h;f=i.__DgwCodecEncodeDirectStream_Data(e,f.length,c,d,g,j);this.free(e);if(f!==b("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(c=this.$2)==null?void 0:c.logError(b("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Data Frame encode failure","Failed to decode DGW Data Frame. Received error code "+b("DGWConstants").DgwCodecReturnCodeToString(f));return null}d=i.HEAPU32.subarray(g/h,g/h+1)[0];e=i.HEAPU32.subarray(j/h,j/h+1)[0];c=i.HEAPU8.subarray(d,d+e).slice();this.free(d);this.free(a);return c};c.encodeAck=function(a){var c=this.malloc(h*2),d=c,e=c+h;a=i.__DgwCodecEncodeDirectStream_Ack(a,d,e);if(a!==b("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(b("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"ACK Frame encode failure","Failed to encode ACK Frame. Received error code "+b("DGWConstants").DgwCodecReturnCodeToString(a));return null}f=i.HEAPU32.subarray(d/h,d/h+1)[0];a=i.HEAPU32.subarray(e/h,e/h+1)[0];d=i.HEAPU8.subarray(f,f+a).slice();this.free(f);this.free(c);return d};c.encodeDrain=function(a){var c=this.malloc(h*2),d=c,e=c+h;a=i.__DgwCodecEncodeDrain(a,d,e);if(a!==b("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(b("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Drain Frame encode failure","Failed to encode Drain Frame. Received error code "+b("DGWConstants").DgwCodecReturnCodeToString(a));return null}f=i.HEAPU32.subarray(d/h,d/h+1)[0];a=i.HEAPU32.subarray(e/h,e/h+1)[0];d=i.HEAPU8.subarray(f,f+a).slice();this.free(f);this.free(c);return d};return a}();f.DGWCodec=d}),null);
__d("DGWWebSocketTransport",[],(function(a,b,c,d,e,f){"use strict";f.getWebSocketConnection=a;function a(a){a=new WebSocket(a);a.binaryType="arraybuffer";return a}}),null);
__d("DirectStream",["$InternalEnum","DGWAckManager","DGWConstants","DGWExponentialBackoff","DGWLoggingContext","DGWStream","DGWStreamEvents","DGWUtils","DGWWebSocketTransport","Promise","err","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g=3e4,h="prod",i=128,j="DGW closing websocket connection",k=b("$InternalEnum")({NORMAL_CLOSURE:1e3,GOING_AWAY:1001,ABNORMAL_CLOSURE:1006,SERVER_INTERNAL_ERROR:1011,DGW_NORMAL_CLOSURE:4e3});a=function(){function a(a){var c=this,d=a.loggingContext,e=a.serviceId,f=a.streamCallbacks,g=a.streamEvents,h=a.streamOptions;a=a.ws;this.$4=!1;this.$2=!0;this.$5=d;this.$1=new(b("DGWAckManager").DGWAckManager)(this.$5);this.$6=1;this.$7=e;this.$8=g;this.$9=f;this.$10=h;this.$3=new(b("DGWUtils").DGWCodec)(this.$5,{onDataReceived:function(a,b){c.$9.onDataReceived(a),b!=null&&c.$12(b)},handleAckReceived:function(a){c.$1.handleAckReceived(a)},receivedDrainSignal:function(a){c.$4===!1&&(c.$9.onStreamMustDrain(c,a),c.$4=!0)}});this.$11=a}a.getDGWStream=function(c){var d,e,f,g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;return b("regeneratorRuntime").async(function(x){while(1)switch(x.prev=x.next){case 0:g=c.appId,i=c.appVersion,j=c.authType,k=c.dgwVersion,l=c.endpoint,m=c.fbId,n=c.headers,o=c.serviceId,p=c.streamCallbacks,q=c.streamOptions;x.next=3;return b("regeneratorRuntime").awrap(b("DGWUtils").DGWCodec.initialize());case 3:x.next=5;return b("regeneratorRuntime").awrap(b("DGWUtils").DGWUtils.initialize());case 5:r=(d=q.overrideUrl)!=null?d:l;s=(e=q.loggingId)!=null?e:b("DGWUtils").uuidv4();t=b("DGWUtils").DGWUtils.constructConnectUrl({appId:g,appVersion:i,authType:j,dgwVersion:k,fbId:m,headers:n,loggingId:s,tier:(f=q.serviceTier)!=null?f:h,serviceId:o,endpoint:r,regionHint:q.regionHint});u=new(b("DGWLoggingContext").DGWLoggingContext)(k,s,o,m);v=new(b("DGWStreamEvents").DGWStreamEvents)(u);w=function(){return a.$13({connectUrl:t,loggingContext:u,serviceId:o,streamCallbacks:p,streamEvents:v,streamOptions:q})};v.streamEstablishmentPending();x.prev=12;x.next=15;return b("regeneratorRuntime").awrap(b("DGWExponentialBackoff").callWithExponentialBackoff(w));case 15:return x.abrupt("return",x.sent);case 18:x.prev=18;x.t0=x["catch"](12);v.streamEstablishmentFailure(x.t0,"Could not establish stream with exponential backoff");throw x.t0;case 22:case"end":return x.stop()}},null,this,[[12,18]])};a.$13=function(c){var d=c.connectUrl,e=c.loggingContext,f=c.serviceId,g=c.streamEvents,h=c.streamCallbacks;c=c.streamOptions;d=b("DGWWebSocketTransport").getWebSocketConnection(d);var i=new a({loggingContext:e,serviceId:f,streamCallbacks:h,streamEvents:g,streamOptions:c,ws:d});i.$11.onmessage=a.$14(i);i.$11.onclose=a.$15(i);i.$11.onerror=function(){i.$2=!0};i.$11.onopen=function(){i.$8.streamEstablished(),i.$2=!1};return a.getStreamPromise(i)};a.getStreamPromise=function(a){return new(b("Promise"))(function(c,d){var e=a.$11.onerror;a.$11.onerror=function(){e(),d(b("err")("Stream could not be initialized"))};var f=a.$11.onopen;a.$11.onopen=function(){f(),c(a)}})};a.$15=function(a){return function(c){if(a.$2===!0){a.$8.connectionEstablishmentFailure(c.code);return}a.$2=!0;if(c.code!==k.DGW_NORMAL_CLOSURE){a.$8.streamClosed(!1,"Websocket connection failure with code "+c.code);switch(c.code){case k.NORMAL_CLOSURE:a.$9.onError(b("DGWStream").StreamError.ABNORMAL_CLOSURE);break;case k.ABNORMAL_CLOSURE:a.$9.onError(b("DGWStream").StreamError.ABNORMAL_CLOSURE);break;case k.SERVER_INTERNAL_ERROR:a.$9.onError(b("DGWStream").StreamError.SERVER_INTERNAL_ERROR);break;case k.GOING_AWAY:a.$9.onError(b("DGWStream").StreamError.GOING_AWAY);break;default:a.$9.onError(b("DGWStream").StreamError.UNKNOWN_ERROR);break}}else a.$8.streamClosed(!0,""),a.$9.onClose(a);a.$1.clearPendingAcks()}};a.$14=function(a){return function(b){if(!(b.data instanceof ArrayBuffer)){a.$8.error("Incorrect Data Protocol","Received "+typeof b.data+" instead of ArrayBuffer");return}a.$3.append(new Uint8Array(b.data));a.$3.processData()}};var c=a.prototype;c.send=function(a,c){var d,e,f;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:c===void 0&&(c=g);d=this.$6++%i;e=this.$16(a,!0,d);if(!(e===!1)){h.next=5;break}return h.abrupt("return",!1);case 5:h.next=7;return b("regeneratorRuntime").awrap(this.$1.waitForAck(d,c));case 7:f=h.sent;return h.abrupt("return",f);case 9:case"end":return h.stop()}},null,this)};c.$12=function(a){var b=this.$17("Error sending ACK");if(b===!1)return!1;b=this.$3.encodeAck(a);if(b==null||this.$11==null)return!1;this.$8.ackSent(a);this.$11.send(b);return!0};c.sendAndForget=function(a){return this.$16(a,!1,0)};c.__sendDrain=function(a){var c=b("DGWConstants").drainReasonToDrainReasonString(a),d=this.$17("Error simulating drain with reason "+c);if(d===!1)return!1;d=this.$3.encodeDrain(a);if(d==null||this.$11==null)return!1;this.$8.drainSent(c);this.$11.send(d);return!0};c.$16=function(a,b,c){b===void 0&&(b=!1);c===void 0&&(c=0);var d=this.$17("Error sending data");if(d===!1)return!1;d=this.$3.encodeData(a,b,c);if(d==null||this.$11==null)return!1;this.$11.send(d);this.$8.dataSent(c,d.length,b);return!0};c.close=function(){this.$2===!1?(this.$5.logEvent(b("DGWLoggingContext").DGWLoggingComponent.STREAM_COMPONENT,"Client called close on stream"),this.$11.close(k.DGW_NORMAL_CLOSURE,j)):this.$5.logEvent(b("DGWLoggingContext").DGWLoggingComponent.STREAM_COMPONENT,"Client called close on a closed stream")};c.$17=function(a){if(this.$11==null){this.$8.error(a,"Error sending message when websocket was uninitialized");return!1}if(this.$11.readyState!==WebSocket.OPEN){this.$8.error(a,"Error sending message when stream state is "+this.$11.readyState);return!1}if(this.$2){this.$8.error(a,"Error sending message when stream was closed locally");return!1}return!0};return a}();f.DirectStream=a}),null);
__d("RawDGWClient",["DirectStream"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var b=a.appId,c=a.appVersion,d=a.authType,e=a.dgwVersion,f=a.endpoint;a=a.fbId;this.$1=b;this.$2=c;this.$3=d;this.$4=e;this.$5=f;this.$6=a}var c=a.prototype;c.establishDGWStream=function(a,c,d,e){return b("DirectStream").DirectStream.getDGWStream({appId:this.$1,appVersion:this.$2,authType:this.$3,dgwVersion:this.$4,endpoint:this.$5,headers:a,fbId:this.$6,serviceId:c,streamCallbacks:d,streamOptions:e})};c.establishDGWStreamWithInitialData=function(a,b,c,d,e){a=this.establishDGWStream(a,c,d,e);c=a.then(function(a){return a.send(b)});return{sendPromise:c,streamPromise:a}};return a}();f.RawDGWClient=a}),null);
__d("DGWClient",["DGWAuth","DGWWebConfig","RawDGWClient","isStringNullOrEmpty"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=new(b("RawDGWClient").RawDGWClient)({appId:(c=b("DGWWebConfig")).appId,appVersion:c.appVersion,authType:b("DGWAuth").DGWAuth.FACEBOOK,dgwVersion:c.dgwVersion,endpoint:c.endpoint,fbId:c.fbId});function a(){if(!b("isStringNullOrEmpty")(b("DGWWebConfig").endpoint)||window.document.location.href.includes("intern/rti/portal"))return g;else throw new Error("unsupported_environment_retry_with_mqtt")}}),null);
__d("DGWStreamCallbacks",[],(function(a,b,c,d,e,f){"use strict"}),null);
__d("DGWStreamSetup",["Base64"],(function(a,b,c,d,e,f){"use strict";f.convertHeaders=a;function a(a,c,d,e){var f={};a=Object.entries(a);for(var g=0;g<a.length;g++){var h=a[g],i=h[0];h=h[1];typeof h=="string"?f["XRSS-"+i]=h:typeof h=="number"?f["XRSN-"+i]=h.toString():typeof h=="boolean"?f["XRSB-"+i]=h.toString():typeof h=="object"&&h!=null&&(f["XRSO-"+i]=b("Base64").encode(JSON.stringify(h)))}c&&(f["xrs-body"]="true");d!=null&&d.length>0&&(f["xrs-instrumentation"]=b("Base64").encode(d));f["XRS-Accept-Ack"]="RSAck";e!=null&&e.ackTimeoutSec!=null&&(f["XRS-SRAck-Timeout"]=e.ackTimeoutSec.toString());return f}}),null);
__d("RequestStreamCommonRequestStreamCommonSerializers",["RequestStreamCommonRequestStreamCommonTypes","ThriftTypes","jsbi"],(function(a,b,c,d,e,f){"use strict";a=function(){return{}};c=function(){return{bytes:Uint8Array.of()}};d=function(){return{message:""}};f=function(){return{reason:b("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)}};var g=function(){return{}},h=function(){return{stream_id:"0",last_sequencer:0,amendment_count:0,last_status:b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)}},i=function(){return{caller_timestamp_ms:"0"}},j=function(){return{original_ping_timestamp_ms:"0"}},k=function(){return{}},l=function(a,c){c.writeStructBegin("ResponseRewriteRequest"),a.new_headers!=null&&(c.writeFieldBegin({fname:"new_headers",ftype:b("ThriftTypes").STRING,fid:1}),c.writeString(a.new_headers)),a.new_body!=null&&(c.writeFieldBegin({fname:"new_body",ftype:b("ThriftTypes").STRING,fid:2}),c.writeBinary(a.new_body)),a.patch_headers!=null&&(c.writeFieldBegin({fname:"patch_headers",ftype:b("ThriftTypes").STRING,fid:3}),c.writeString(a.patch_headers)),a.kill_body!=null&&(c.writeFieldBegin({fname:"kill_body",ftype:b("ThriftTypes").BOOL,fid:4}),c.writeBool(a.kill_body)),a.temporary!=null&&(c.writeFieldBegin({fname:"temporary",ftype:b("ThriftTypes").BOOL,fid:5}),c.writeBool(a.temporary)),c.writeFieldStop(),c.writeStructEnd()},m=function(a,c){c.writeStructBegin("ResponseData");c.writeFieldBegin({fname:"bytes",ftype:b("ThriftTypes").STRING,fid:1});if(a.bytes!=null)c.writeBinary(a.bytes);else{var d=Uint8Array.of();c.writeBinary(d)}a.metadata!=null&&(c.writeFieldBegin({fname:"metadata",ftype:b("ThriftTypes").STRING,fid:2}),c.writeString(a.metadata));c.writeFieldStop();c.writeStructEnd()},n=function(a,c){c.writeStructBegin("LogMessage");c.writeFieldBegin({fname:"message",ftype:b("ThriftTypes").STRING,fid:1});if(a.message!=null)c.writeString(a.message);else{a="";c.writeString(a)}c.writeFieldStop();c.writeStructEnd()},o=function(a,c){c.writeStructBegin("Termination");c.writeFieldBegin({fname:"reason",ftype:b("ThriftTypes").I32,fid:1});if(a.reason!=null){var d;c.writeI32((d=a.reason)!=null?d:0)}else{d=b("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0);c.writeI32((d=d)!=null?d:0)}a.message!=null&&(c.writeFieldBegin({fname:"message",ftype:b("ThriftTypes").STRING,fid:2}),c.writeString(a.message));a.retry_delay_ms!=null&&(c.writeFieldBegin({fname:"retry_delay_ms",ftype:b("ThriftTypes").I64,fid:3}),c.writeI64(b("jsbi").BigInt(a.retry_delay_ms)));c.writeFieldStop();c.writeStructEnd()},p=function(a,c){c.writeStructBegin("AmendStreamAck"),a.amendment_id!=null&&(c.writeFieldBegin({fname:"amendment_id",ftype:b("ThriftTypes").I64,fid:1}),c.writeI64(b("jsbi").BigInt(a.amendment_id))),a.accepted!=null&&(c.writeFieldBegin({fname:"accepted",ftype:b("ThriftTypes").BOOL,fid:2}),c.writeBool(a.accepted)),a.result!=null&&(c.writeFieldBegin({fname:"result",ftype:b("ThriftTypes").STRING,fid:3}),c.writeBinary(a.result)),c.writeFieldStop(),c.writeStructEnd()},q=function(a,c){c.writeStructBegin("StreamCheck");c.writeFieldBegin({fname:"stream_id",ftype:b("ThriftTypes").I64,fid:1});if(a.stream_id!=null)c.writeI64(b("jsbi").BigInt(a.stream_id));else{var d="0";c.writeI64(b("jsbi").BigInt(d))}c.writeFieldBegin({fname:"last_sequencer",ftype:b("ThriftTypes").I32,fid:2});if(a.last_sequencer!=null)c.writeI32(a.last_sequencer);else{d=0;c.writeI32(d)}c.writeFieldBegin({fname:"amendment_count",ftype:b("ThriftTypes").I32,fid:4});if(a.amendment_count!=null)c.writeI32(a.amendment_count);else{d=0;c.writeI32(d)}c.writeFieldBegin({fname:"last_status",ftype:b("ThriftTypes").I32,fid:3});if(a.last_status!=null){c.writeI32((d=a.last_status)!=null?d:0)}else{a=b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0);c.writeI32((d=a)!=null?d:0)}c.writeFieldStop();c.writeStructEnd()},r=function(a,c){c.writeStructBegin("Ping");c.writeFieldBegin({fname:"caller_timestamp_ms",ftype:b("ThriftTypes").I64,fid:1});if(a.caller_timestamp_ms!=null)c.writeI64(b("jsbi").BigInt(a.caller_timestamp_ms));else{var d="0";c.writeI64(b("jsbi").BigInt(d))}if(a.streams_to_check!=null){c.writeFieldBegin({fname:"streams_to_check",ftype:b("ThriftTypes").LIST,fid:2});c.writeListBegin({etype:b("ThriftTypes").STRUCT,size:a.streams_to_check.length});for(var d=a.streams_to_check,a=Array.isArray(d),e=0,d=a?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(a){if(e>=d.length)break;f=d[e++]}else{e=d.next();if(e.done)break;f=e.value}f=f;q(f,c)}}c.writeFieldStop();c.writeStructEnd()},s=function(a,c){c.writeStructBegin("Pong");c.writeFieldBegin({fname:"original_ping_timestamp_ms",ftype:b("ThriftTypes").I64,fid:1});if(a.original_ping_timestamp_ms!=null)c.writeI64(b("jsbi").BigInt(a.original_ping_timestamp_ms));else{var d="0";c.writeI64(b("jsbi").BigInt(d))}if(a.stream_ids_missing!=null){c.writeFieldBegin({fname:"stream_ids_missing",ftype:b("ThriftTypes").LIST,fid:2});c.writeListBegin({etype:b("ThriftTypes").I64,size:a.stream_ids_missing.length});for(var d=a.stream_ids_missing,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;c.writeI64(b("jsbi").BigInt(g))}}if(a.stream_ids_behind!=null){c.writeFieldBegin({fname:"stream_ids_behind",ftype:b("ThriftTypes").LIST,fid:3});c.writeListBegin({etype:b("ThriftTypes").I64,size:a.stream_ids_behind.length});for(var g=a.stream_ids_behind,f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(e>=g.length)break;d=g[e++]}else{e=g.next();if(e.done)break;d=e.value}d=d;c.writeI64(b("jsbi").BigInt(d))}}if(a.stream_ids_with_lost_amendments!=null){c.writeFieldBegin({fname:"stream_ids_with_lost_amendments",ftype:b("ThriftTypes").LIST,fid:4});c.writeListBegin({etype:b("ThriftTypes").I64,size:a.stream_ids_with_lost_amendments.length});for(var d=a.stream_ids_with_lost_amendments,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;c.writeI64(b("jsbi").BigInt(g))}}if(a.stream_ids_with_wrong_status!=null){c.writeFieldBegin({fname:"stream_ids_with_wrong_status",ftype:b("ThriftTypes").LIST,fid:5});c.writeListBegin({etype:b("ThriftTypes").I64,size:a.stream_ids_with_wrong_status.length});for(var g=a.stream_ids_with_wrong_status,f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(e>=g.length)break;d=g[e++]}else{e=g.next();if(e.done)break;d=e.value}a=d;c.writeI64(b("jsbi").BigInt(a))}}c.writeFieldStop();c.writeStructEnd()},t=function(a,c){c.writeStructBegin("StreamResponseDelta");if(a.flow_status!=null){var d;c.writeFieldBegin({fname:"flow_status",ftype:b("ThriftTypes").I32,fid:1});c.writeI32((d=a.flow_status)!=null?d:0);c.writeFieldStop();c.writeStructEnd();return}if(a.log!=null){c.writeFieldBegin({fname:"log",ftype:b("ThriftTypes").STRUCT,fid:2});n(a.log,c);c.writeFieldStop();c.writeStructEnd();return}if(a.rewrite!=null){c.writeFieldBegin({fname:"rewrite",ftype:b("ThriftTypes").STRUCT,fid:3});l(a.rewrite,c);c.writeFieldStop();c.writeStructEnd();return}if(a.data!=null){c.writeFieldBegin({fname:"data",ftype:b("ThriftTypes").STRUCT,fid:4});m(a.data,c);c.writeFieldStop();c.writeStructEnd();return}if(a.termination!=null){c.writeFieldBegin({fname:"termination",ftype:b("ThriftTypes").STRUCT,fid:5});o(a.termination,c);c.writeFieldStop();c.writeStructEnd();return}if(a.amend_ack!=null){c.writeFieldBegin({fname:"amend_ack",ftype:b("ThriftTypes").STRUCT,fid:6});p(a.amend_ack,c);c.writeFieldStop();c.writeStructEnd();return}c.writeFieldStop();c.writeStructEnd()},u=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRING?c.new_headers=a.readString():a.skip(e);break;case 2:e===b("ThriftTypes").STRING?c.new_body=a.readBinary():a.skip(e);break;case 3:e===b("ThriftTypes").STRING?c.patch_headers=a.readString():a.skip(e);break;case 4:e===b("ThriftTypes").BOOL?c.kill_body=a.readBool():a.skip(e);break;case 5:e===b("ThriftTypes").BOOL?c.temporary=a.readBool():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return c},v=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRING?c.bytes=a.readBinary():a.skip(e);break;case 2:e===b("ThriftTypes").STRING?c.metadata=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.bytes===void 0&&(c.bytes=Uint8Array.of());return c},w=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRING?c.message=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.message===void 0&&(c.message="");return c},x=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I32?c.reason=b("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(a.readI32()):a.skip(e);break;case 2:e===b("ThriftTypes").STRING?c.message=a.readString():a.skip(e);break;case 3:e===b("ThriftTypes").I64?c.retry_delay_ms=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.reason===void 0&&(c.reason=b("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0));return c},y=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.amendment_id=a.readI64().toString():a.skip(e);break;case 2:e===b("ThriftTypes").BOOL?c.accepted=a.readBool():a.skip(e);break;case 3:e===b("ThriftTypes").STRING?c.result=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return c},z=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.stream_id=a.readI64().toString():a.skip(e);break;case 2:e===b("ThriftTypes").I32?c.last_sequencer=a.readI32():a.skip(e);break;case 4:e===b("ThriftTypes").I32?c.amendment_count=a.readI32():a.skip(e);break;case 3:e===b("ThriftTypes").I32?c.last_status=b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(a.readI32()):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.stream_id===void 0&&(c.stream_id="0");c.last_sequencer===void 0&&(c.last_sequencer=0);c.amendment_count===void 0&&(c.amendment_count=0);c.last_status===void 0&&(c.last_status=b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0));return c},A=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.caller_timestamp_ms=a.readI64().toString():a.skip(e);break;case 2:if(e===b("ThriftTypes").LIST){c.streams_to_check=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=z(a);c.streams_to_check.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.caller_timestamp_ms===void 0&&(c.caller_timestamp_ms="0");return c},B=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.original_ping_timestamp_ms=a.readI64().toString():a.skip(e);break;case 2:if(e===b("ThriftTypes").LIST){c.stream_ids_missing=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString();c.stream_ids_missing.push(g)}}else a.skip(e);break;case 3:if(e===b("ThriftTypes").LIST){c.stream_ids_behind=[];g=a.readListBegin();for(var f=0;f<g.size;f++){d=a.readI64().toString();c.stream_ids_behind.push(d)}}else a.skip(e);break;case 4:if(e===b("ThriftTypes").LIST){c.stream_ids_with_lost_amendments=[];d=a.readListBegin();for(var f=0;f<d.size;f++){g=a.readI64().toString();c.stream_ids_with_lost_amendments.push(g)}}else a.skip(e);break;case 5:if(e===b("ThriftTypes").LIST){c.stream_ids_with_wrong_status=[];g=a.readListBegin();for(var f=0;f<g.size;f++){d=a.readI64().toString();c.stream_ids_with_wrong_status.push(d)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.original_ping_timestamp_ms===void 0&&(c.original_ping_timestamp_ms="0");return c},C=function(a){var c,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===b("ThriftTypes").STOP)break;switch(e){case 1:if(f===b("ThriftTypes").I32)if(c==null)d.flow_status=b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(a.readI32()),c="flow_status";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: flow_status, previous deserialized field: "+c);else a.skip(f);break;case 2:if(f===b("ThriftTypes").STRUCT)if(c==null)d.log=w(a),c="log";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: log, previous deserialized field: "+c);else a.skip(f);break;case 3:if(f===b("ThriftTypes").STRUCT)if(c==null)d.rewrite=u(a),c="rewrite";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: rewrite, previous deserialized field: "+c);else a.skip(f);break;case 4:if(f===b("ThriftTypes").STRUCT)if(c==null)d.data=v(a),c="data";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: data, previous deserialized field: "+c);else a.skip(f);break;case 5:if(f===b("ThriftTypes").STRUCT)if(c==null)d.termination=x(a),c="termination";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: termination, previous deserialized field: "+c);else a.skip(f);break;case 6:if(f===b("ThriftTypes").STRUCT)if(c==null)d.amend_ack=y(a),c="amend_ack";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: amend_ack, previous deserialized field: "+c);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d};e.exports={AmendStreamAck$DefaultConstructor:g,LogMessage$DefaultConstructor:d,Ping$DefaultConstructor:i,Pong$DefaultConstructor:j,ResponseData$DefaultConstructor:c,ResponseRewriteRequest$DefaultConstructor:a,StreamCheck$DefaultConstructor:h,StreamResponseDelta$DefaultConstructor:k,Termination$DefaultConstructor:f,deserializeAmendStreamAck:y,deserializeLogMessage:w,deserializePing:A,deserializePong:B,deserializeResponseData:v,deserializeResponseRewriteRequest:u,deserializeStreamCheck:z,deserializeStreamResponseDelta:C,deserializeTermination:x,serializeAmendStreamAck:p,serializeLogMessage:n,serializePing:r,serializePong:s,serializeResponseData:m,serializeResponseRewriteRequest:l,serializeStreamCheck:q,serializeStreamResponseDelta:t,serializeTermination:o}}),null);
__d("RequestStreamSingleChannelSingleChannelRequestStreamTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Ignored:100,Success:200,Queued:250,UnknownStream:400,HandledUnknownResult:450,Failure:500});c=b("$InternalEnum")({Request_headers:"request_headers",Request_body:"request_body",Amend:"amend",Ack:"ack",Response:"response",Ping:"ping",Pong:"pong"});e.exports={Ack:a,Payload$Types:c}}),null);
__d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers",["RequestStreamCommonRequestStreamCommonSerializers","RequestStreamCommonRequestStreamCommonTypes","RequestStreamSingleChannelSingleChannelRequestStreamTypes","ThriftTypes","jsbi"],(function(a,b,c,d,e,f){"use strict";a=function(){return{}};c=function(){return{body:Uint8Array.of()}};d=function(){return{amendment:Uint8Array.of()}};f=function(){return{ack:b("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)}};var g=function(){return{delta:[]}},h=function(){return{}},i=function(a,c){c.writeStructBegin("RequestStreamHeaders"),a.headers!=null&&(c.writeFieldBegin({fname:"headers",ftype:b("ThriftTypes").STRING,fid:1}),c.writeBinary(a.headers)),a.instrumentation_data!=null&&(c.writeFieldBegin({fname:"instrumentation_data",ftype:b("ThriftTypes").STRING,fid:2}),c.writeBinary(a.instrumentation_data)),c.writeFieldStop(),c.writeStructEnd()},j=function(a,c){c.writeStructBegin("RequestStreamBody");c.writeFieldBegin({fname:"body",ftype:b("ThriftTypes").STRING,fid:1});if(a.body!=null)c.writeBinary(a.body);else{a=Uint8Array.of();c.writeBinary(a)}c.writeFieldStop();c.writeStructEnd()},k=function(a,c){c.writeStructBegin("AmendStream");a.amendment_id!=null&&(c.writeFieldBegin({fname:"amendment_id",ftype:b("ThriftTypes").I64,fid:1}),c.writeI64(b("jsbi").BigInt(a.amendment_id)));c.writeFieldBegin({fname:"amendment",ftype:b("ThriftTypes").STRING,fid:2});if(a.amendment!=null)c.writeBinary(a.amendment);else{var d=Uint8Array.of();c.writeBinary(d)}a.is_query!=null&&(c.writeFieldBegin({fname:"is_query",ftype:b("ThriftTypes").BOOL,fid:3}),c.writeBool(a.is_query));a.instrumentation_data!=null&&(c.writeFieldBegin({fname:"instrumentation_data",ftype:b("ThriftTypes").STRING,fid:4}),c.writeBinary(a.instrumentation_data));c.writeFieldStop();c.writeStructEnd()},l=function(a,c){c.writeStructBegin("StreamResponseAck");a.response_id!=null&&(c.writeFieldBegin({fname:"response_id",ftype:b("ThriftTypes").I64,fid:1}),c.writeI64(b("jsbi").BigInt(a.response_id)));c.writeFieldBegin({fname:"ack",ftype:b("ThriftTypes").I32,fid:2});if(a.ack!=null){var d;c.writeI32((d=a.ack)!=null?d:0)}else{d=b("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0);c.writeI32((d=d)!=null?d:0)}a.query_result!=null&&(c.writeFieldBegin({fname:"query_result",ftype:b("ThriftTypes").STRING,fid:3}),c.writeBinary(a.query_result));c.writeFieldStop();c.writeStructEnd()},m=function(a,c){c.writeStructBegin("StreamResponse");a.response_id!=null&&(c.writeFieldBegin({fname:"response_id",ftype:b("ThriftTypes").I64,fid:1}),c.writeI64(b("jsbi").BigInt(a.response_id)));c.writeFieldBegin({fname:"delta",ftype:b("ThriftTypes").LIST,fid:2});if(a.delta!=null){c.writeListBegin({etype:b("ThriftTypes").STRUCT,size:a.delta.length});for(var d=a.delta,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(g,c)}}else{g=[];c.writeListBegin({etype:b("ThriftTypes").STRUCT,size:g.length});for(var f=0;f<g.length;f++){e=g[f];b("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(e,c)}}if(a.ack_level!=null){c.writeFieldBegin({fname:"ack_level",ftype:b("ThriftTypes").I32,fid:3});c.writeI32((d=a.ack_level)!=null?d:0)}a.query_request!=null&&(c.writeFieldBegin({fname:"query_request",ftype:b("ThriftTypes").STRING,fid:4}),c.writeBinary(a.query_request));a.instrumentation_data!=null&&(c.writeFieldBegin({fname:"instrumentation_data",ftype:b("ThriftTypes").STRING,fid:5}),c.writeBinary(a.instrumentation_data));c.writeFieldStop();c.writeStructEnd()},n=function(a,c){c.writeStructBegin("Payload");if(a.request_headers!=null){c.writeFieldBegin({fname:"request_headers",ftype:b("ThriftTypes").STRUCT,fid:1});i(a.request_headers,c);c.writeFieldStop();c.writeStructEnd();return}if(a.request_body!=null){c.writeFieldBegin({fname:"request_body",ftype:b("ThriftTypes").STRUCT,fid:2});j(a.request_body,c);c.writeFieldStop();c.writeStructEnd();return}if(a.amend!=null){c.writeFieldBegin({fname:"amend",ftype:b("ThriftTypes").STRUCT,fid:3});k(a.amend,c);c.writeFieldStop();c.writeStructEnd();return}if(a.ack!=null){c.writeFieldBegin({fname:"ack",ftype:b("ThriftTypes").STRUCT,fid:4});l(a.ack,c);c.writeFieldStop();c.writeStructEnd();return}if(a.response!=null){c.writeFieldBegin({fname:"response",ftype:b("ThriftTypes").STRUCT,fid:5});m(a.response,c);c.writeFieldStop();c.writeStructEnd();return}if(a.ping!=null){c.writeFieldBegin({fname:"ping",ftype:b("ThriftTypes").STRUCT,fid:6});b("RequestStreamCommonRequestStreamCommonSerializers").serializePing(a.ping,c);c.writeFieldStop();c.writeStructEnd();return}if(a.pong!=null){c.writeFieldBegin({fname:"pong",ftype:b("ThriftTypes").STRUCT,fid:7});b("RequestStreamCommonRequestStreamCommonSerializers").serializePong(a.pong,c);c.writeFieldStop();c.writeStructEnd();return}c.writeFieldStop();c.writeStructEnd()},o=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRING?c.headers=a.readBinary():a.skip(e);break;case 2:e===b("ThriftTypes").STRING?c.instrumentation_data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return c},p=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRING?c.body=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.body===void 0&&(c.body=Uint8Array.of());return c},q=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.amendment_id=a.readI64().toString():a.skip(e);break;case 2:e===b("ThriftTypes").STRING?c.amendment=a.readBinary():a.skip(e);break;case 3:e===b("ThriftTypes").BOOL?c.is_query=a.readBool():a.skip(e);break;case 4:e===b("ThriftTypes").STRING?c.instrumentation_data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.amendment===void 0&&(c.amendment=Uint8Array.of());return c},r=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.response_id=a.readI64().toString():a.skip(e);break;case 2:e===b("ThriftTypes").I32?c.ack=b("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(a.readI32()):a.skip(e);break;case 3:e===b("ThriftTypes").STRING?c.query_result=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.ack===void 0&&(c.ack=b("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0));return c},s=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.response_id=a.readI64().toString():a.skip(e);break;case 2:if(e===b("ThriftTypes").LIST){c.delta=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=b("RequestStreamCommonRequestStreamCommonSerializers").deserializeStreamResponseDelta(a);c.delta.push(g)}}else a.skip(e);break;case 3:e===b("ThriftTypes").I32?c.ack_level=b("RequestStreamCommonRequestStreamCommonTypes").AckLevel.cast(a.readI32()):a.skip(e);break;case 4:e===b("ThriftTypes").STRING?c.query_request=a.readBinary():a.skip(e);break;case 5:e===b("ThriftTypes").STRING?c.instrumentation_data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.delta===void 0&&(c.delta=[]);return c},t=function(a){var c,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===b("ThriftTypes").STOP)break;switch(e){case 1:if(f===b("ThriftTypes").STRUCT)if(c==null)d.request_headers=o(a),c="request_headers";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_headers, previous deserialized field: "+c);else a.skip(f);break;case 2:if(f===b("ThriftTypes").STRUCT)if(c==null)d.request_body=p(a),c="request_body";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_body, previous deserialized field: "+c);else a.skip(f);break;case 3:if(f===b("ThriftTypes").STRUCT)if(c==null)d.amend=q(a),c="amend";else throw new Error("more than one field have been deserialized in union type: Payload; current field: amend, previous deserialized field: "+c);else a.skip(f);break;case 4:if(f===b("ThriftTypes").STRUCT)if(c==null)d.ack=r(a),c="ack";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ack, previous deserialized field: "+c);else a.skip(f);break;case 5:if(f===b("ThriftTypes").STRUCT)if(c==null)d.response=s(a),c="response";else throw new Error("more than one field have been deserialized in union type: Payload; current field: response, previous deserialized field: "+c);else a.skip(f);break;case 6:if(f===b("ThriftTypes").STRUCT)if(c==null)d.ping=b("RequestStreamCommonRequestStreamCommonSerializers").deserializePing(a),c="ping";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ping, previous deserialized field: "+c);else a.skip(f);break;case 7:if(f===b("ThriftTypes").STRUCT)if(c==null)d.pong=b("RequestStreamCommonRequestStreamCommonSerializers").deserializePong(a),c="pong";else throw new Error("more than one field have been deserialized in union type: Payload; current field: pong, previous deserialized field: "+c);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d};e.exports={AmendStream$DefaultConstructor:d,Payload$DefaultConstructor:h,RequestStreamBody$DefaultConstructor:c,RequestStreamHeaders$DefaultConstructor:a,StreamResponse$DefaultConstructor:g,StreamResponseAck$DefaultConstructor:f,deserializeAmendStream:q,deserializePayload:t,deserializeRequestStreamBody:p,deserializeRequestStreamHeaders:o,deserializeStreamResponse:s,deserializeStreamResponseAck:r,serializeAmendStream:k,serializePayload:n,serializeRequestStreamBody:j,serializeRequestStreamHeaders:i,serializeStreamResponse:m,serializeStreamResponseAck:l}}),null);
__d("DefaultStreamRef",["BladeRunnerTypes","CompactSerializerPolyfill","DGWClient","DGWStream","DGWStreamSetup","FBLogger","Promise","RequestStreamCommonRequestStreamCommonTypes","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamSingleChannelSingleChannelRequestStreamSerializers","RequestStreamSingleChannelSingleChannelRequestStreamTypes","StreamRef","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g=4,h=0,i={UserIntention:"UserIntention",StartStreamFailure:"StartStreamFailure",StreamError:"StreamError",RemoteTermination:"RemoteTermination",ServerDrain:"ServerDrain",ReestablishError:"ReestablishError",ClientError:"ClientError"};f.CloseReasons=i;var j=function(){function a(a,b){this.$1=a,this.$2=b,this.$3=!0}var c=a.prototype;c.$4=function(a){var c=this;a=b("CompactSerializerPolyfill").deserialize(a,b("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").deserializePayload);if(a.response){var d=null;if(a.response.instrumentation_data!=null&&a.response.instrumentation_data.length>0)try{var e=JSON.parse(new TextDecoder("utf-8").decode(a.response.instrumentation_data));d=e.auxId}catch(a){}if(!this.$2.isAlive()){b("FBLogger")("requeststream-web").warn("get data after stream is closed");(e=this.$2.e2eLogger)==null?void 0:e.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").RESPONSE,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"response_received_after_close"},d);return}if(!this.isLastStream()){(e=this.$2.e2eLogger)==null?void 0:e.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").RESPONSE,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"response_received_after_termination"},d);return}(e=this.$2.e2eLogger)==null?void 0:e.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").RESPONSE,b("RequestStreamE2EClientLoggerEvent").RECEIVED,{},d);e=a.response.delta;e.forEach(function(a){if(a.data)c.$1.onData(new TextDecoder("utf-8").decode(a.data.bytes));else if(a.flow_status){var d=a.flow_status;c.$2.witnessState(d)&&c.$1.onFlowStatus(d)}else if(a.termination){d=(d=a.termination.message)!=null?d:"unknown termination msg";c.$2.shouldTerminateOrRetry(i.RemoteTermination,d,a.termination.reason===b("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.TryAgain,a.termination.retry_delay_ms!=null?parseInt(a.termination.retry_delay_ms,10):null)}else a.log?c.$1.onLog(a.log.message):b("FBLogger")("requeststream-web").warn("not support other delta type now")});(e=this.$2.e2eLogger)==null?void 0:e.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").RESPONSE,b("RequestStreamE2EClientLoggerEvent").SENT,{},d);a.response.ack_level===b("RequestStreamCommonRequestStreamCommonTypes").AckLevel.Device&&a.response.response_id!=null&&this.$2.ackStreamResponse(a.response.response_id,d)}else{b("FBLogger")("requeststream-web").warn("Unexpected Payload type");(e=this.$2.e2eLogger)==null?void 0:e.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").RESPONSE,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"unexpected_payload_type"})}};c.onDataReceived=function(a){try{this.$4(a)}catch(c){(a=this.$2.e2eLogger)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").RESPONSE,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:c.message});this.$2.shouldTerminateOrRetry(i.ClientError,c.message,!1)}};c.onError=function(a){if(!this.isLastStream())return;var c="",d=!1;switch(a){case b("DGWStream").StreamError.GOING_AWAY:d=!0;c="StreamError: GOING_AWAY";break;case b("DGWStream").StreamError.ABNORMAL_CLOSURE:d=!0;c="StreamError: ABNORMAL_CLOSURE";break;case b("DGWStream").StreamError.SERVER_INTERNAL_ERROR:c="StreamError: Received SERVER_INTERNAL_ERROR";break;default:c="StreamError: unknown error"}this.$2.shouldTerminateOrRetry(i.StreamError,c,d)};c.onClose=function(a){this.isLastStream()&&this.$2.handleTerminateStream(i.RemoteTermination,"Client receive OnClose and Server will not send more data",!0)};c.onStreamMustDrain=function(a,b){this.isLastStream()&&this.$2.shouldTerminateOrRetry(i.ServerDrain,b,!0)};c.updateLastStream=function(a){this.$3=a};c.isLastStream=function(){return this.$3};return a}();f.RSDGWStreamCallback=j;function k(a){if(!a){a=new Error("dgw_stream_send_ack_failure");a.stack;throw a}}function l(a,b){if(a==null||a.length===0)return null;a=JSON.parse(a);a.auxId=b;return new TextEncoder().encode(JSON.stringify(a))}a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,h){var i;i=a.call(this)||this;i.$DefaultStreamRef13=0;i.$DefaultStreamRef14=0;i.$DefaultStreamRef1=null;i.$DefaultStreamRef4=c;i.$DefaultStreamRef5=d;i.$DefaultStreamRef6=e;i.$DefaultStreamRef7=h;i.$DefaultStreamRef8=f;i.$DefaultStreamRef9=g;i.$DefaultStreamRef11=!1;i.$DefaultStreamRef2=!1;i.$DefaultStreamRef12=!1;i.e2eLogger=b("RequestStreamE2ELogger").createStreamLogger(c,h,b("BladeRunnerTypes").Transport.WEB_RS_STARGATE);(e=i.e2eLogger)==null?void 0:e.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,b("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:(c=d==null?void 0:(f=d.length)==null?void 0:f.toString())!=null?c:"0"},"0");return i}var d=c.prototype;d.start=function(a){var c=this;a===void 0&&(a=!1);var d=String(this.$DefaultStreamRef13++),e=Date.now();return this.$DefaultStreamRef15(d).then(function(){var a;c.$DefaultStreamRef12=!1;var f=(Date.now()-e).toString();(a=c.e2eLogger)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,b("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:f},d)})["catch"](function(e){var f;e.stack;b("FBLogger")("requeststream-web").catching(e).warn("failed to start dgw stream");(f=c.e2eLogger)==null?void 0:f.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:e.message},d);c.$DefaultStreamRef12=!1;c.handleTerminateStream(a?i.ReestablishError:i.StartStreamFailure,e.message,!0);throw e})};d.$DefaultStreamRef15=function(a){var c,d,e,f,g,h,i,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:if(this.$DefaultStreamRef2){m.next=26;break}m.prev=1;d=new j(this.$DefaultStreamRef6,this);this.$DefaultStreamRef10=d;e=b("DGWStreamSetup").convertHeaders(this.$DefaultStreamRef4,this.$DefaultStreamRef5!=null,this.$DefaultStreamRef7);f={};this.$DefaultStreamRef8!=null&&(f=(g=this.$DefaultStreamRef8.dgwStreamOptions)!=null?g:{});m.next=9;return b("regeneratorRuntime").awrap(b("DGWClient")().establishDGWStream(e,"realtime",d,f));case 9:this.$DefaultStreamRef3=m.sent;m.next=15;break;case 12:m.prev=12;m.t0=m["catch"](1);throw m.t0;case 15:if(!this.$DefaultStreamRef2){m.next=17;break}throw new Error("stream_already_canceled");case 17:h=Uint8Array.of();this.$DefaultStreamRef5!=null&&(i={request_body:{body:new TextEncoder().encode(this.$DefaultStreamRef5)}},h=b("CompactSerializerPolyfill").serialize(i,b("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload));if(this.$DefaultStreamRef3){m.next=21;break}throw new Error("dgwstream_is_null");case 21:l=this.$DefaultStreamRef3.send(h).then(k);(c=this.e2eLogger)==null?void 0:c.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,b("RequestStreamE2EClientLoggerEvent").SENT,{},a);return m.abrupt("return",l);case 26:throw new Error("stream_already_canceled");case 27:case"end":return m.stop()}},null,this,[[1,12]])};d.amendwithoutAck=function(a){var c,d=this,e=new TextEncoder().encode(a),f=String(this.$DefaultStreamRef14++);(c=this.e2eLogger)==null?void 0:c.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT,b("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:(a=a==null?void 0:(c=a.length)==null?void 0:c.toString())!=null?a:"0"},f);c=l(this.$DefaultStreamRef7,f);a={amend:{amendment:e,instrumentation_data:c}};e=b("CompactSerializerPolyfill").serialize(a,b("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);var g=Date.now();if(this.canAmend()&&this.$DefaultStreamRef3!=null){this.$DefaultStreamRef3.send(e).then(k).then(function(){var a,c=(Date.now()-g).toString();(a=d.e2eLogger)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT,b("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:c},f)})["catch"](function(a){var c;return(c=d.e2eLogger)==null?void 0:c.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:a.message},f)});(c=this.e2eLogger)==null?void 0:c.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT,b("RequestStreamE2EClientLoggerEvent").SENT,{},f)}else{(a=this.e2eLogger)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},f);b("FBLogger")("requeststream-web").warn("amendwithoutAck when stream has not started")}};d.ackStreamResponse=function(a,c){a={ack:{response_id:a,ack:b("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.Success}};a=b("CompactSerializerPolyfill").serialize(a,b("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);if(this.$DefaultStreamRef3!=null){this.$DefaultStreamRef3.send(a);(a=this.e2eLogger)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,b("RequestStreamE2EClientLoggerEvent").SENT,{},c)}else{(a=this.e2eLogger)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},c)}};d.canAmend=function(){return this.$DefaultStreamRef1===b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started||this.$DefaultStreamRef1===b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted};d.handleTerminateStream=function(a,c,d){this.$DefaultStreamRef3&&a!==i.StreamError&&a!==i.RemoteTermination&&this.$DefaultStreamRef3.close();this.$DefaultStreamRef3=null;this.witnessState(b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped)&&this.$DefaultStreamRef6.onFlowStatus(b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped);d&&!this.$DefaultStreamRef2&&this.$DefaultStreamRef6.onTermination("terminate stream because "+a+" with msg : "+c);(d=this.$DefaultStreamRef10)==null?void 0:d.updateLastStream(!1)};d.cancel=function(){var a;(a=this.e2eLogger)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").CANCEL,b("RequestStreamE2EClientLoggerEvent").RECEIVED);this.$DefaultStreamRef2=!0;this.handleTerminateStream(i.UserIntention,"user cancel the stream",!0)};d.isAlive=function(){return this.$DefaultStreamRef3!=null};d.getState=function(){return this.$DefaultStreamRef1};d.updateState=function(a){this.$DefaultStreamRef1=a};d.witnessState=function(a){var c=!0;switch(a){case b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:c=!this.$DefaultStreamRef11;this.$DefaultStreamRef11||(this.$DefaultStreamRef11=!0);break;case b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started:c=this.getState()!==b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started;break;case b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped:c=this.getState()!==b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped}this.updateState(a);return c};d.$DefaultStreamRef16=function(){this.$DefaultStreamRef9--;return this.start(!0)["catch"](function(a){b("FBLogger")("requeststream-web").catching(a).warn("failed to restart dgw stream: "+a.message)})};d.shouldTerminateOrRetry=function(a,c,d,e){var f=this;if(this.$DefaultStreamRef12)return;var g=c;this.$DefaultStreamRef9||(g="cannot retry for error: "+c+" because of hit max retry limitation");c=d&&this.$DefaultStreamRef9;this.handleTerminateStream(a,g,!c);if(c){var i=(d=e)!=null?d:h;this.$DefaultStreamRef12=!0;if(i>0)return new(b("Promise"))(function(a){return setTimeout(a,i)}).then(function(){return f.$DefaultStreamRef16()});else return this.$DefaultStreamRef16()}};d.getDGWHandler=function(){return this.$DefaultStreamRef10};return c}(b("StreamRef"));f.DefaultStreamRef=a}),null);
__d("DGWRequestStreamClient",["DefaultStreamRef","RequestStreamE2ESampling","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var c=a.prototype;c.requestStream=function(a,c,d,e,f){var g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:g=new(b("DefaultStreamRef").DefaultStreamRef)(a,c,d,e,b("RequestStreamE2ESampling").validateInstrumentationData(a,f));h.next=3;return b("regeneratorRuntime").awrap(g.start());case 3:return h.abrupt("return",g);case 4:case"end":return h.stop()}},null,this)};return a}();e.exports=a}),null);
__d("RtiRequestStreamPulsarClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1745999");c=b("FalcoLoggerInternal").create("rti_request_stream_pulsar_client",a);e.exports=c}),null);
__d("PulsarLogger",["RtiRequestStreamPulsarClientFalcoEvent"],(function(a,b,c,d,e,f){a=function(){function a(){}var c=a.prototype;c.log=function(a,c){b("RtiRequestStreamPulsarClientFalcoEvent").log(function(){return{test_id:c.testId,request_id:c.requestId,test_name:a.testName,test_result:c.testResult,failure_reason:c.failureReason,transport:a.transport,payload_interval_ms:a.payloadIntervalMs.toString(),subscribe_issued:c.subscribeIssued,subscribe_retry_count:c.subscribeRetryCount.toString(),subscribe_success:c.subscribeSuccess,subscribe_latency_ms:c.subscribeLatencyMs.toString(),subscribe_timeout_interval_ms:a.timeoutIntervalMs.toString(),publish_timeout_interval_ms:c.publishTimeoutIntervalMs.toString(),num_flow_status_started:c.numFlowStatusStarted.toString(),num_flow_status_accepted:c.numFlowStatusAccepted.toString(),num_flow_status_stopped:c.numFlowStatusStopped.toString(),num_payloads_expected:a.numPayloadsExpected.toString(),num_payloads_received:c.numPayloadsReceived.toString(),test_duration_ms:c.testDurationMs.toString(),test_end_time_ms:c.testEndTimeMs.toString()}})};return a}();c=new a();f.pulsarLogger=c}),null);
__d("TestStateMachine",["$InternalEnum","BladeRunnerLogger","PulsarLogger"],(function(a,b,c,d,e,f){var g=b("$InternalEnum").Mirrored(["INITIAL","START","REQUEST_LANDED","SUCCESS","FAILURE","ABORT"]),h="Request timeout",i="Publish timeout",j="Payload integrity check failure",k="Stream terminate";a=function(){function a(a,b,c){this.$1=b,this.$2=c,this.$3=a,this.$4=g.INITIAL,this.$5=0,this.$6=0,this.$7=0,this.$8=0,this.$9=Date.now(),this.$13=0,this.$14=0,this.$15=0,this.$16=0,this.$10=0,this.$11=0,this.$12=0,this.$20=null}var c=a.prototype;c.setStreamRef=function(a){this.$20=a};c.hasTestEnd=function(){return this.$4===g.SUCCESS||this.$4===g.ABORT||this.$4===g.FAILURE};c.updatePublishTimeoutIntervalMs=function(){this.$5==0&&(this.$16=this.$3.payloadIntervalMs),this.$16=this.$3.timeoutIntervalMs+this.$3.payloadIntervalMs};c.getFailureReason=function(){return this.$17!=null?this.$18!=null?this.$17+" lastSeenError: "+this.$18:this.$17:""};c.logTestResultAndCancel=function(){this.$12=Date.now(),b("BladeRunnerLogger").info("Pulsar test concluded. Number of expected payloads = "+this.$3.numPayloadsExpected+" , Number of received payload = "+this.$5+" , Test Result = "+this.$4+", Failure reason: "+(this.$17!=null?this.$17:"")),b("PulsarLogger").pulsarLogger.log(this.$3,{testId:this.$1,requestId:this.$2,testResult:this.hasTestEnd()?this.$4:"Unknown",numFlowStatusAccepted:this.$13,numFlowStatusStarted:this.$14,numFlowStatusStopped:this.$15,numPayloadsReceived:this.$5,publishTimeoutIntervalMs:this.$16,subscribeIssued:this.$6>0,subscribeRetryCount:this.$8,subscribeLatencyMs:this.$11,subscribeSuccess:this.$7>0,testDurationMs:this.$12-this.$9,testEndTimeMs:this.$12,failureReason:this.$4===g.SUCCESS?"":this.getFailureReason()}),this.$20&&(this.$20.cancel(),this.$20=null)};c.onStart=function(){var a=this;b("BladeRunnerLogger").info("Pulsar starts testId:"+this.$1+"requestId: "+this.$2);if(this.$4!==g.INITIAL){b("BladeRunnerLogger").warn("Drop Pulsar request");return}this.$4=g.START;this.$6++;this.$11==0&&(this.$10=Date.now());this.$19=setTimeout(function(){a.onTimeOut()},this.$3.timeoutIntervalMs)};c.onRequestLanded=function(){var a=this;b("BladeRunnerLogger").info("Pulsar request Landed");if(this.$4!==g.START){b("BladeRunnerLogger").warn("drop the request ack");return}clearTimeout(this.$19);this.updatePublishTimeoutIntervalMs();this.$4=g.REQUEST_LANDED;this.$7++;this.$11==0&&(this.$11=Date.now()-this.$10);this.$19=setTimeout(function(){a.onTimeOut()},this.$16)};c.onPayloadReceived=function(a){var c=this;b("BladeRunnerLogger").info("Pulsar payload received");if(this.$4!==g.REQUEST_LANDED){b("BladeRunnerLogger").warn("drop the received payload");return}clearTimeout(this.$19);this.$5++;this.updatePublishTimeoutIntervalMs();if(!this.payloadIntegrityCheck(a)){this.$17=j;this.$4=g.FAILURE;this.logTestResultAndCancel();return}this.$3.numPayloadsExpected<=this.$5?(this.$4=g.SUCCESS,this.logTestResultAndCancel()):this.$19=setTimeout(function(){c.onTimeOut()},this.$16)};c.onTerminate=function(a){b("BladeRunnerLogger").info("Pulsar on terminate");if(this.hasTestEnd()){b("BladeRunnerLogger").info("stream gets terminated after test ends "+a);return}clearTimeout(this.$19);this.$4=g.FAILURE;this.$17=k;this.$18=a;this.$8--;this.logTestResultAndCancel()};c.onRetry=function(){b("BladeRunnerLogger").info("Pulsar on retry"),this.$18="Mid hop retry",this.$8++};c.onFlowStatusAccepted=function(){this.$13++};c.onFlowStatusStarted=function(){b("BladeRunnerLogger").info("Pulsar on flow status started"),this.$14++};c.onFlowStatusStopped=function(){this.$15++};c.onTimeOut=function(){b("BladeRunnerLogger").info("Pulsar timeout");if(this.hasTestEnd()){b("BladeRunnerLogger").warn("Timer not stopped after test ends");return}this.$4===g.REQUEST_LANDED?this.$17=i:this.$17=h;this.$4=g.FAILURE;this.logTestResultAndCancel()};c.payloadIntegrityCheck=function(a){a=JSON.parse(a);a=a.payload||"";return a.length==this.$3.payloadSize+(this.$7-1)};return a}();e.exports=a}),null);
__d("PulsarClient",["BladeRunnerDeferredClient","BladeRunnerLogger","BladeRunnerStreamHandler","BladeRunnerTypes","DGWRequestStreamDeferredClient","Random","RequestStreamCommonRequestStreamCommonTypes","RequestStreamHandler","TestStateMachine","WebStorage","promiseDone","qex","uuid"],(function(a,b,c,d,e,f){var g,h=["facebook.com","workplace.com"];a=function(){function a(){var a;this.$1=(a=b("qex")._("1814429"))!=null?a:"web_pulsar_qe";a=(a=b("qex")._("1814371"))!=null?a:"WEB_BR_MQTT";this.$2=[];for(var a=a.split(","),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;switch(e){case"WEB_BR_MQTT":this.$2.push(b("BladeRunnerTypes").Transport.WEB_BR_MQTT);break;case"WEB_RS_MQTT":this.$2.push(b("BladeRunnerTypes").Transport.WEB_RS_MQTT);break;case"WEB_RS_STARGATE":this.$2.push(b("BladeRunnerTypes").Transport.WEB_RS_STARGATE);break;default:b("BladeRunnerLogger").info("Pulsar test unknown transport");break}}this.$3=(e=b("qex")._("1787520"))!=null?e:0;this.$4=(d=b("qex")._("1841667"))!=null?d:2;this.$5=(c=b("qex")._("1841668"))!=null?c:100;this.$6=(a=b("qex")._("1841669"))!=null?a:1e5;this.$7=(e=b("qex")._("1841670"))!=null?e:1e4;this.$8=(d=b("qex")._("1867647"))!=null?d:1}var c=a.prototype;c.getBodyString=function(a){a={number_of_payloads:a.numPayloadsExpected,payload_size_in_bytes:a.payloadSize,time_interval_in_seconds:a.payloadIntervalMs/1e3,test_name:a.testName,time_span_mode:"fixed",publish_mode:"direct"};return JSON.stringify({input:a})};c.startPulsarTest=function(){this.runConcurrentTests()&&(g||(g=b("WebStorage"))).setItemGuarded(g.getSessionStorage(),"pulsarTestConcurrency",this.$8.toString())};c.runConcurrentTests=function(){var a=window.location.hostname.split(".").slice(-2).join(".");if(!b("Random").coinflip(this.$3)||!h.includes(a))return!1;a=(g||(g=b("WebStorage"))).getSessionStorageForRead();if(a&&a.getItem("pulsarTestConcurrency"))return!1;a=b("uuid")();for(var c=this.$2,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var i={testName:this.$1,transport:f,numPayloadsExpected:this.$4,payloadIntervalMs:this.$6,payloadSize:this.$5,timeoutIntervalMs:this.$7},j=0,k;if(f===b("BladeRunnerTypes").Transport.WEB_BR_MQTT)for(j=0;j<this.$8;j++)k=a+"_"+j.toString(),this.runMQTTTest(a,k,i);else for(j=0;j<this.$8;j++)k=a+"_"+j.toString(),this.runRSClientTest(f,a,k,i)}return!0};c.runMQTTTest=function(a,c,d){b("BladeRunnerLogger").info("Running MQTT pulsar test");var e=b("BladeRunnerDeferredClient"),f=new(b("TestStateMachine"))(d,a,c),g=new(b("BladeRunnerStreamHandler"))(function(a){f.onPayloadReceived(a)},null,function(a){switch(a){case b("BladeRunnerTypes").StreamStatus.ACCEPTED:f.onFlowStatusAccepted();break;case b("BladeRunnerTypes").StreamStatus.STARTED:f.onFlowStatusStarted();f.onRequestLanded();break;case b("BladeRunnerTypes").StreamStatus.PAUSED:f.onFlowStatusStopped();f.onRetry();break;case b("BladeRunnerTypes").StreamStatus.REJECTED:f.onTerminate("StreamUpdate: REJECTED");break;case b("BladeRunnerTypes").StreamStatus.CLOSED:f.onTerminate("StreamUpdate: CLOSED");break;default:b("BladeRunnerLogger").info("Pulsar Received statusUpdate unknown?")}},function(a){b("BladeRunnerLogger").info(" Pulsar Received log: "+a)},function(a){b("BladeRunnerLogger").info("Pulsar Received batch: "+JSON.stringify(a))});f.onStart();e.requestStream({method:"Pulsar",test_id:a},this.getBodyString(d),g,{requestId:c,forceLogContext:"pulsar"})};c.runRSClientTest=function(a,c,d,e){b("BladeRunnerLogger").info("Running SG pulsar test");var f=new(b("TestStateMachine"))(e,c,d);a=new(b("RequestStreamHandler"))({onData:function(a){f.onPayloadReceived(a)},onTermination:function(a){f.onTerminate(a.message)},onLog:function(a){b("BladeRunnerLogger").info(" Pulsar Received log: "+a)},onFlowStatus:function(a){switch(a){case b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:f.onFlowStatusAccepted();break;case b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started:f.onFlowStatusStarted();f.onRequestLanded();break;case b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped:f.onFlowStatusStopped();f.onRetry();break}}});f.onStart();var g={dgwStreamOptions:{loggingId:d}};b("promiseDone")(b("DGWRequestStreamDeferredClient").requestStream({method:"Pulsar",test_id:c},this.getBodyString(e),a,g,{requestId:d,forceLogContext:"pulsar"}).then(function(a){f.setStreamRef(a),b("BladeRunnerLogger").info("DGW create stream successfully")})["catch"](function(a){b("BladeRunnerLogger").info("DGW failed to create stream, with exception msg: "+a.message)}))};return a}();c=new a();e.exports=c}),null);